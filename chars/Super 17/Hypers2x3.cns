; Super Explosion
[Statedef 20001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = -3000
ctrl = 0
velset = 0,0
anim = 3020
sprpriority = 2

[State 3000, Speech 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2

[state 2200, super pause]
type = superpause
trigger1 = time = 0
time = 205
anim = -1
darken = 1
movetime = 205

[State 4001 explod]
type = Explod
trigger1        = time = 0
anim =7034
id =7034
postype = p1
pos = 10,10
sprpriority =5
supermove =205
removetime= 44
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 4001 explod]
type = Explod
trigger1        = time = 44
anim =7036
id =7036
postype = p1
pos = 10,10
sprpriority =5
supermove =205
removetime= 80
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 4001 explod]
type = Explod
trigger1 = time = 145
anim =3021
id =3021
postype = p1
pos = 45, -100
sprpriority =5
supermove =205
removetime= 60
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 4001 explod]
type = Explod
trigger1 = time = 155
anim =3021
id =3021
postype = p1
pos = 45, -100
sprpriority =5
supermove =205
removetime= 50
scale= 1.5, 1.5
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 4001 explod]
type = Explod
trigger1 = time = 175
anim =3021
id =3021
postype = p1
pos = 45, -100
sprpriority =5
supermove =205
removetime= 30
scale= 2.1, 2.1
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 4001 explod]
type = Explod
trigger1 = time = 200
anim =3021
id =3021
postype = p1
pos = 45, -100
sprpriority =5
supermove =205
removetime= 5
scale= 2.9, 2.9
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 2000, Talk]
type = Velset
trigger1 = Time = [0,9]


;[State 2000, Speech 1]
;type = PlaySnd
;trigger1 = AnimElem = 1
;value = s500,8
;channel = 0



;[State 2000, Explod]
;type = Explod
;trigger1 = AnimElem = 1
;persistent = 0
;anim = 3025
;postype = p1
;pos = 0, 0
;ontop = 1
;bindtime = -1
;removeongethit= 1
;sprpriority = 3

;[State 2000]
;type = Explod
;trigger1 = AnimElem = 3
;anim = 9051
;postype = P1
;pos = -49,-125
;ownpal = 1
;ignorehitpause = 1
;sprpriority = 5
;supermovetime = 40
;removeongethit = 1

;[State 2000, SuperPause]
;type = SuperPause
;trigger1 = AnimElem= 3
;time = 45
;pos = -49,-127
;anim = S9050
;sound = S99,0
;poweradd = -1000
;removeongethit = 1

[State 3200, Portrait]
type = Explod
trigger1 = AnimElem = 4, = 1
anim = 6000
pos = -160,-60
facing = 1
postype = back
sprpriority = -20
supermove = 1
bindtime = -1
ownpal = 1


[State 2000, Stop]
type = Posfreeze
trigger1 = Time = [11,64]


[State 2000, 2]
type = Projectile
trigger1 = AnimElem = 8
ID = 2000
projanim = 3022
;projhitanim = 1006 
;projremovetime = 8
offset = 45, -20
velocity = 3
attr = S, HP
damage = 850,50
getpower = 0
;givepower = 40
guardflag = MA
supermovetime = 205
pausetime = 0,12
sparkno = 821
sparkxy = 0, 0
hitsound = S500,4
guardsound = 6,0
;p1stateno = 3022
ground.type = High
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -8, -13.5
airguard.velocity = -3.5,-2.75
air.velocity = -2.5,-13.5
air.juggle = 3
air.fall = 1
fall = 1

;[State 2000, 1]
;type = PlaySnd
;trigger1 = Time = 2
;value = 0, 4

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Super Explosion - Contact
[Statedef 2001]
type     = S
movetype = A
physics  = S
ctrl = 0
velset = 0,0
anim = 3027
juggle = 5
sprpriority = -2

[State 2001, 4]
type = Posset
trigger1 = 1
y = 0

[State 2001, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 3026
postype = p1
pos = 0, 0
bindtime = -1
removetime = -2
ownpal = 1
removeongethit = 1

[State 2001, 3]
type = Helper
trigger1 = time = 0
id = 2002
name = "Explosion"
pos = 0, 0
postype = p2
stateno = 2002
helpertype = normal
keyctrl = 0
ownpal = 0
ontop = 1

[State 2001, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[Statedef 2002]
type     = S
movetype = A
ctrl = 0
velset = 0,0
anim = 3022
juggle = 5

[State 2002]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 2002, 1]
type = PlaySnd
trigger1 = AnimElem = 1, < 11 
value = 7, 4

[State 2002, 2]
type = HitDef
trigger1 = AnimElem = 1, < 10
attr = S, HP
animtype  = Hard
damage    = 1000, 500
guardflag = MA
hitflag = MAF
getpower  = 0
;givepower = 30,15
pausetime = 8, 5
sparkno = -1
sparkxy = 0,-40
hitsound   = s500,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-2
air.velocity = -1.5,-1.5
fall= 1
fall.recover = 0
palfx.time = 30
palfx.add = 0,0,255
palfx.sinadd = 255,255,255,3

[State 2002, 2]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HP
animtype  = Hard
damage    = 1000, 50
guardflag = MA
hitflag = MAF
getpower  = 0
;givepower = 30,15
pausetime = 15, 19
sparkno = -1
sparkxy = 0,-40
hitsound   = s500,4
guardsound = 6,0
ground.type = LOW
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 10,-6
air.velocity = 10,-6
fall= 1
fall.recover = 0
palfx.time = 30
palfx.add = 0,0,255
palfx.sinadd = 255,255,255,3

[State 2002, 2]
type = Playsnd
triggerall = p2stateno !=3200
triggerall = movehit = 1
trigger1 = AnimElem = 1, < 10 
value = 4,0
channel = 20

;[State 2002, 1]
;type = EnvColor
;trigger1 = AnimElem = 1, < 9
;value = 231,231,231
;time = 2

[State 2002, 4]
type = Explod
trigger1 = movehit = 1
persistent = 0
anim = 1230
pos = 0,-50
postype = p2
sprpriority = 2
bindtime = 17
ignorehitpause = 1

[State 2002, 3]
type = EnvShake
trigger1 = AnimElem = 1
freq = 180
ampl = -3
phase = 70
time = 90

[State 2002, 4]
type = GameMakeAnim
trigger1 = AnimElem = 1
value = 50

[State 2002, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 2002, 6]
type = Destroyself
trigger1 = Animtime = 0
trigger2 = parent, StateNo != 2001



;---------------------------------------------------------------------------
; DELIGHTFUL SHOWER
[Statedef 3200]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3200
poweradd = -2000

[State 3000, Speech 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,1

[state 2200, super pause]
type = superpause
trigger1 = time = 0
time = 203
anim = -1
darken = 1
movetime = 203

[State 3200, Rise]
type = Velset
trigger1 = Time = 0
y = 0

[State 4001 explod]
type = Explod
trigger1        = time = 0
anim =7034
id =7034
postype = p1
pos = 10,10
sprpriority =5
supermove =274
removetime= 44
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

[State 4001 explod]
type = Explod
trigger1        = time = 44
anim =7036
id =7036
postype = p1
pos = 10,10
sprpriority =5
supermove =274
removetime= 80
ontop =0
ignorehitpause = 0
ownpal = 1
bindtime =-1
persistent = 0

;[State 3200, Speech 1]
;type = PlaySnd
;trigger1 = AnimElem = 1
;value = s500,6
;volume = 200
;channel = 0

[State 3200, Portrait]
type = Explod
trigger1 = AnimElem = 4, = 1
anim = 6000
pos = -160,-60
facing = 1
postype = back
sprpriority = -20
supermove = 274
bindtime = -1
ownpal = 1

[State 3200, BG]
type = Explod
trigger1 = AnimElem = 4, = 1
anim = 6300
pos = 0,240
scale = 1.055, 1.075
postype = left
supermove = 274
sprpriority = -21
removetime = 50
bindtime = -1
ownpal = 1

;[State 3200, Pause]
;type = SuperPause
;trigger1 = AnimElem = 4, = 1
;time = 50
;movetime = 50
;anim = 102
;pos = 3,-75


;[State 3200, Super SFX]
;type = PlaySnd
;trigger1 = AnimElem = 4, = 1
;value = S0,18
;abspan = 0

[State 3200, NotHitBy]
Type = NotHitBy
trigger1 = AnimElem = 4, = 1
Value = SCA
Time = 50

;[State 3200, Remove BG]
;type = AssertSpecial
;trigger1 = Time = [11,60]
;flag = NoFG
;flag2 = NoBG

[State 3200, Stop]
type = Posfreeze
trigger1 = Time = [11,64]

[State 3200, Gold]
type = ChangeState
triggerall = PalNo = 7
trigger1 = Time = 64
value = 3250

[State 3200, Fall]
type = Velset
trigger1 = Time = 130
x = 0

[State 3200, Speech 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = S1,17
channel = 0

[State 3200, SFX]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
trigger5 = AnimElem = 13
value = S0,56

;[State 3200, Cursor]
;type = Helper
;trigger1 = NumHelper(3202) < 2
;trigger1 = AnimElem = 5
;name = "Cursor"
;ID = 3202
;pos = -125,-50
;postype = p2
;stateno = 3202
;helpertype = normal
;keyctrl = 0
;ownpal = 1

;[State 3200, Cursor]
;type = Helper
;trigger1 = NumHelper(3202) < 2
;trigger1 = AnimElem = 5
;name = "Cursor"
;ID = 3202
;pos = 0,-175
;postype = p2
;stateno = 3202
;helpertype = normal
;keyctrl = 0
;ownpal = 1

[State 3200, Missile]
type = Helper
trigger1 = AnimElem = 8
trigger2 = AnimElem = 8, = 1
trigger3 = AnimElem = 8, = 2
trigger4 = AnimElem = 8, = 3
trigger5 = AnimElem = 8, = 4
trigger6 = AnimElem = 8, = 5
trigger7 = AnimElem = 8, = 6
trigger8 = AnimElem = 8, = 7
trigger9 = AnimElem = 8, = 8
trigger10 = AnimElem = 8, = 9
trigger11 = AnimElem = 8, = 10
trigger12 = AnimElem = 8, = 11
trigger13 = AnimElem = 8, = 12
trigger14 = AnimElem = 8, = 13
trigger15 = AnimElem = 8, = 14
name = "Seeking Missile"
ID = 3201
pos = 33,-68
postype = p1
stateno = 3201
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3200, Smoke]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
trigger5 = AnimElem = 13
anim = 824
pos = -10,-100
facing = 1
postype = p1
movetime = 274
sprpriority = -1
ownpal = 1

[State 3200, cazzo, ma nonc'è:D]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

; Seeking Missile helper
[Statedef 3201]
type = A
movetype = A
physics = N
anim = 1400
sprpriority = 2

[State 3201, Select 1]
type = VarRandom
trigger1 = time = 0
v = 2
range = 0,16

[State 3201, Select 2]
type = VarRandom
trigger1 = time = 0
v = 3
range = 0,16

[State 3201, Start Vel]
type = VelSet
trigger1 = time = 0
x = (var(2) - 8)
y = (var(3) - 8)

[State 3201, Override]
type = HitOverride
trigger1 = Time = 0
attr = SCA, AA, AT, AP
stateno = 258
time = -1

[State 3201, Nothitby]
type = NotHitBy
trigger1 = Time = 0
value = , AA, AT
time = -1

[State 3201, Seek 1]
type = VelAdd
trigger1 = P2Dist X < 0
trigger1 = Time >= 10
x = -.6

[State 3201, Seek 2]
type = VelAdd
trigger1 = P2Dist X > 0
trigger1 = Time >= 10
x = .6

[State 3201, Seek 3]
type = VelAdd
trigger1 = P2Dist Y < 50
trigger1 = Time >= 10
y = -.6

[State 3201, Seek 4]
type = VelAdd
trigger1 = P2Dist Y > 50
trigger1 = Time >= 10
y = .6

[State 3201, Limit 1]
type = VelSet
trigger1 = vel X > 8
x = 8

[State 3201, Limit 2]
type = VelSet
trigger1 = vel X < -8
x = -8

[State 3201, Limit 3]
type = VelSet
trigger1 = vel Y > 8
y = 8

[State 3201, Limit 4]
type = VelSet
trigger1 = vel Y < -8
y = -8



[State 3201, Facing]
type = AngleDraw
trigger1 = 1

[State 3201, Attack]
type = HitDef
trigger1 = 1
attr = A, HP
damage    = 50, 5
animtype = Back
getpower  = 0
hitflag = MAFD
guardflag = MA
priority = 3
sparkno = 2
guard.sparkno = S6800
sparkxy = 0,0
hitsound = s500,4         
guardsound = 6,0  
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -1.5,-3
guard.velocity = -1.5
air.hittime = 15
air.velocity = -1.5,-3
airguard.velocity = -1.5,0
down.velocity = -1.5,-3
air.fall = 1
fall = 1
fall.recover = 0
;p2stateno = 9000

;[State 3201, Helper Hits Count Too]
;type = ParentVarSet
;trigger1 = UniqHitCount != Var(20)
;v = 19
;value = 1

;[State 3201, Helper Hits Count Too]
;type = VarSet
;trigger1 = UniqHitCount != Var(20)
;v = 20
;value = UniqHitCount

[State 3201, Burning]
type = Explod
triggerall = p2movetype = H
triggerall = enemy, IsHelper = 0
trigger1 = movehit = 1
anim = 6200
pos = 0,-40
random = 80,80
facing = -1
postype = p2
bindtime = -1
ontop = 1
ownpal = 1
[State 3201, Burning]
type = Explod
triggerall = p2movetype = H
triggerall = enemy, IsHelper = 0
trigger1 = movehit = 1
anim = 6200
pos = 0,-40
random = 80,80
facing = -1
postype = p2
bindtime = -1
ontop = 1
ownpal = 1
[State 3201, Burning]
type = Explod
triggerall = p2movetype = H
triggerall = enemy, IsHelper = 0
trigger1 = movehit = 1
anim = 6200
pos = 0,-40
random = 80,80
facing = -1
postype = p2
bindtime = -1
ontop = 1
ownpal = 1

[State 3201, Var]
type = ParentVarSet
trigger1 = movecontact = 1
v = 0
value = 1


[State 3201, Blow-up]
type = ChangeState
trigger1 = movecontact = 1
trigger2 = Time = ifelse(root, PalNo = 7,80,50)
value = 258

;[State 3201, 3]
;type = Destroyself
;trigger1 = Animtime = 0
;trigger2 = parent, StateNo != 2001




