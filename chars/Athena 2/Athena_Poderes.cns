

;**************************************************************************
;                                                                         *
;     Athena   Autor   Grafica : Shunchain y Programacion : Tecla2000     *
;                                                                         *
;**************************************************************************


;Patada voladora

[Statedef 660]
type = A
movetype = A
physics = A
anim = 660
juggle = 2
ctrl = 0
poweradd= 100

[State 660, afterimage]
type = AfterImage
trigger1 = time = 0
time = 40
FrameGap = 2
length = 10
PalBright   =   0,  0,  0
PalContrast = 107,107,222 ;blue 
PalAdd      =   0,  0,  0
PalMul      =  1,1,1
Trans = Add1

[State 660 , vel]
type = VelSet
trigger1 = AnimElem = 4
x = 18
y = 13

[State 660, kosumo]
type = Explod
trigger1 = AnimElem = 4
anim = 3695
pos = 0,0
postype = p1
sprpriority = -2
removetime = 20
supermove = 1
ignorehitpause = 1
ownpal = 1
bindtime = -1

[State 660 , 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900,0


[State 660 , 2]
type = PlaySnd
trigger1 = Time = 0
value = 1500, 6
volume = 256

[State 660 , 3]
type = HitDef
trigger1 = AnimElem = 4
priority = 7
attr = A, NA
damage = 80
getpower = 150
animtype = hard
guardflag = HA
sparkxy = 0,-25
sparkno =S-1
hitsound = S1000,10
guardsound = S320,0
pausetime = 18,18
ground.type = Low
ground.slidetime = 16
ground.hittime  = 20
ground.velocity = -2   
guard.velocity = -6
air.velocity = -2.4,-3.5
airguard.velocity = -3 
Fall = 1

[State -3, Explod]
type = Explod
trigger1 = MoveHit = 1 
anim = 7023
pos = (Floor(p2bodydist X + 19)),0
removetime = 24
postype = P1
facing         = 1
keyctrl        = 0
ownpal         = 0
ignorehitpause = 1
persistent     = 9
sprpriority = 5

; helpers speciales

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 19)),0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 660 , 4]
type = ChangeState
trigger1 = MoveContact = 1
value = 661


[State 660 , 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y > 0
value = 10
ctrl = 1

[Statedef 661]
type = A
movetype = A
physics = A
anim = 661
velset = -1, -5
juggle = 2
ctrl = 0

[State 908, 0]
type = VelSet
trigger1 = Time = 5
x = -1.5

[State 660 , 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;-----------------------------------------------------------------


; Megablock y incrementar cosmo

[Statedef 1400]
type = S
physics = S
anim = 1400
juggle = 5
velset = 0
ctrl = 0

[State 1400 , 4]
type = ReversalDef
trigger1 = time = 0
reversal.attr = SCA, NA, SA, HA, SP
p1stateno = 1401
getpower = 450
hitsound = S1000,2
pausetime = 40,50
sparkxy = 10,-60

[State 1400 , 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1401]
type = S
movetype = A
physics = S
anim = 1401
poweradd = 400
juggle = 5
velset = 0
ctrl = 0

[State 1400 , 1]
type = PlaySnd
trigger1 = time = 0
value = 900,0

[State 1401, light]
type = Explod
trigger1 = MoveContact
ID = 7375
anim = 7375
pos = -33,28
postype = p1
sprpriority = 4
supermove = 1
removetime = 70
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0

[State 1401, polvere]
type = MakeDust
trigger1 = time = 0
pos = -15,3
pos2 = -22,-3
spacing = 2

[State 1401 , 2]
type = VelAdd
trigger1 = time = 0
x = -7;11

[State 1401 , 2]
type = VelMul
trigger1 = AnimElem = 1
x = 2.5

[State 1401 , 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------


; Recarga de cosmo

[Statedef 730000]
type = S
movetype = I
physics = S
anim = 730000
velset = 0
ctrl = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1500, 7
volumen = 256



[State 730000, 1]
type = ChangeState
trigger1 = AnimTime= 0
value =735000

; Charge
[Statedef 735000]
type = S
movetype = I
physics = S
anim = 735000


[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 12
trigger4 = AnimElem = 17
value = 1000, 3
channel = -1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 12
trigger4 = AnimElem = 17
value = 1000, 4

[State 210, 1]
type = PlaySnd
trigger1 = time = 5
value = 1500, 13
channel = 6

[State 735000, 1]
type = ChangeState
trigger1 = command != "charge"
trigger2 = command != "charge 1"
value =740000

[State 735000, cosmo]
type = Explod
trigger1 = time = 0
pos = 0,0
anim = 6150
ID = 6148
sprpriority = -3
removetime = 83
bindtime = -1
ownpal = 1
supermove = 1
removeongethit = 1
ignorehitpause = 1

[State 735000, costelacion]
type = Explod
trigger1 = time = 0
pos = -5,-5
anim = 6151
ID = 6148
sprpriority = -2
scale = 0.50, 0.50
removetime = 83
bindtime = -1
ownpal = 1
supermove = 1
removeongethit = 1
ignorehitpause = 1

[State 735000, POLVERE]
type = Explod
trigger1 = time = 0
pos = 0,0
anim = 6149
ID = 6148
sprpriority = 2
removetime = 83
bindtime = -1
ownpal = 1
supermove = 1
removeongethit = 1
ignorehitpause = 1

[State 735000, POLVERE]
type = Explod
trigger1 = time = 0
pos = 0,10
anim = 6148
ID = 6148
sprpriority = 2
removetime = 83
bindtime = -1
ownpal = 1
supermove = 1
removeongethit = 1
ignorehitpause = 1

[State 735000, 2]
type = PowerAdd
trigger1 = Time= [0,12]
value = 38

[State 1700, envshake]
type = EnvShake
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 12
trigger4 = AnimElem = 17
time = 5

[State 735000, 2]
type = ChangeState
trigger1 = Power >= 3000
value =741000

[State 735000, 3]
type = ChangeState
trigger1 = AnimTime= 0
value =735000

; Charge (Fim)
[Statedef 740000]
type = S
movetype = I
physics = S
anim = 740000

[State 3505, vento]
type = stopsnd
trigger1 = time = 0
channel = 6

[State 3505,remove]
type = RemoveExplod
trigger1 = time = 0
ID = 6148

[State 740000, 1]
type = ChangeState
trigger1 = AnimTime= 0
value =0
ctrl = 1

; Charge Parte1
[Statedef 741000]
type = S
movetype = I
physics = S
anim = 740000

[State 3505, vento]
type = stopsnd
trigger1 = time = 0
channel = 6

[State -3,remove]
type = RemoveExplod
trigger1 = time = 0
ID = 6148

[State 741, 2]
type = ChangeState
trigger1 = AnimTime= 0
value =0
ctrl = 1



;-----------------------------------------------------------------

;recover (recobrar energia y un nuevo estado de pelea)

[Statedef 2000]
type = S
movetype = I
physics = S
anim = 2000
poweradd = -1500
velset = 0
ctrl = 0

[State 2000 , 2]
type = SuperPause
trigger1 = time = 0
time = 69
anim = -1
sprpriority = 3
ownpal = 0
ignorehitpause = 1
darken = 0
bindtime = -1
removeongethit = 1
facing = 0
movetime = 69

[State 990 , 1]
type = EnvShake
trigger1 = AnimElem = 1
trigger2 = AnimElem = 5
trigger3 = AnimElem = 10
time = 6

[State 990,2]
type = Playsnd
trigger1 = Time = 21
value = 1000, 15

[State 990,3]
type = Playsnd
trigger1 = Time = 0
value = 1500, 0
volume = 230

[State -3]
type = Explod
trigger1 = AnimElem = 2
anim = 6000
id = 6000
pos = 0
postype = p1
sprpriority = -5
removetime = 91
bindtime = -1
ownpal = 1
supermove = 1
removeongethit = 1
ignorehitpause = 1


[State 990 , 5]
type = PowerAdd
trigger1 = 1
value = -5

[State 990 , 6]
type = LifeAdd
trigger1 = time = 1
value = 700

[State 990 , 7]
type = LifeAdd
trigger1 = 1
value = 1

[State 990 , 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 2002
ctrl = 1

[Statedef 2002]
type = S
movetype = I
physics = S
anim = 2002
velset = 0
ctrl = 0

;ultra power
[State 2000, 10]
type = AttackMulSet
trigger1 = time = [0,800]
value = 2.8

;ultra defence
[State 2000, 11]
type = DefenceMulSet
trigger1 = time = [0,800]
value = -1.8

[State 991 , 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------



[Statedef 40100]
type            = S
movetype        = A
physics         = S
anim            = 4000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0,]
type       = Helper
trigger1   = AnimElem = 4
helpertype = normal
name       = "atena"
ID         = 1000
stateno    = 161000
pos         = 21,-106
postype    = p1
facing     = 1
keyctrl    = 0
ownpal     = 1
size.xscale = 0.1
size.yscale = 0.1


[State 0]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0,]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 4
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90640
pos         = 26,-82
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S240,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1500,7
volume   = 256
channel  = 0



[State 0, Orihime]
type       = ChangeState
triggerall = command = "FF"
trigger1   = Time >= 27
value      = 100
ctrl       = 1

[State 0, Orihime]
type     = ChangeState
trigger1 = AnimTime = 0
value    = 0
ctrl     = 1

;----------------------------------------



[Statedef 161000]
type            = A
movetype        = A
physics         = N
anim            = 40000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


[State 0, Orihime]
type        = Helper
triggerall  = NumHelper(655) = 0
trigger1    = Time = 0
helpertype  = normal
name        = "Tsubaki"
ID          = 161009
stateno     = 161009
pos         = 0,0
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Bouseki]
type           = Explod
triggerall     = NumExplod(40620) = 0
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.06,0.06
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Bouseki]
type           = Explod
triggerall     = NumExplod(40630) = 0
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.12,0.12
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0 && PrevStateNo != 5020
v        = 10
value    = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1


;-------------------------------------------------------------------------------
;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Orihime]
type           = Helper
triggerall     = NumHelper(14970) = 0
trigger1       = enemynear,MoveType = A && MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "MoveInterrupt"
ID             = 14970
stateno        = 14970
pos            = 0,0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = Time  = 1
time             = 1
value            = ,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 161000
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 0, KotenZanshun]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, KotenZanshun]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
fv       = 0
value    = 27.0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

[State 0, KotenZanshun]
type     = VelSet
trigger1 = 1
x        = 9
y        = 1

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 7
ignorehitpause = 1

[State 0, TsubakiNoInochi]
type     = ParentVarAdd
trigger1 = 1
v        = 50
value    = 1

[State 0, Shunshunrikka]
type = VarSet
trigger1 = time = 0
v = 0
value = 0

[State 0, Shunshunrikka]
type = VarAdd
trigger1 = MoveContact = 1
v = 0
value = 1
persistent = 1

[State 0, Shunshunrikka]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                    = var(0) < 1
trigger1                      = 1
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S,SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
givepower                     = 10,5
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Medium
ground.type                   = High
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 15,8
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 10,10
guard.pausetime               = 12,12
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S310,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 30
ground.slidetime              = 20
guard.slidetime               = 20
guard.hittime                 = 20
air.hittime                   = 30
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-6
airguard.velocity             = -2,-0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = -0.5
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 0
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = S15850
sparkxy                       = -10,0
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
palfx.time                    = 10
palfx.mul                     = 256,200,100
palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0


[State 0, ShunShunRikka]
type     = ChangeState
trigger1 = Var(10) <= 0
value    = 101004

[State 0, KotenZanshun]
type     = ChangeState
trigger1 = root,var(50) = 52
value    = 161001
ctrl     = 0

;-------------------------


[Statedef 161001]
type            = A
movetype        = A
physics         = N
anim            = 40000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
;sprpriority     = -3

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1
;-------------------------------------------------------------------------------
;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Orihime]
type           = Helper
triggerall     = NumHelper(14970) = 0
trigger1       = enemynear,MoveType = A && MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "MoveInterrupt"
ID             = 14970
stateno        = 14970
pos            = 0,0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 7
ignorehitpause = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = Time  = 1
time             = 1
value            = SCA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 161001
time             = 1
slot             = 0
ignorehitpause   = 1


[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1


[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
fv       = 0
value    = 27.0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

[State 1000, Turn]
type = Turn
trigger1 = (ParentDist X < 5)

[State 1000, VelSet]
type = VelSet
trigger1 = (!Time)
x = 9

[State 1000, VelSet]
type = VelSet
trigger1 = vel y < -6
y = 1

[State 1000, VelAdd]
type = VelAdd
trigger1 = (ParentDist X < 0) && (Vel X > -6)
x = -0.2

[State 1000, VelAdd]
type = VelAdd
trigger1 = (ParentDist X > 0) && (Vel X < 6)
x = 0.2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveContact = 1
v = 0
value = 1

[State 0, Shunshunrikka]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                    = var(0) < 1
trigger1                      = 1
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S,SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
givepower                     = 10,5
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Medium
ground.type                   = High
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 30,8
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 10,10
guard.pausetime               = 12,12
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 30
ground.slidetime              = 20
guard.slidetime               = 20
guard.hittime                 = 20
air.hittime                   = 30
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-6
airguard.velocity             = -2,-0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = -0.5
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 0
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = S15850
sparkxy                       = -10,0
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
palfx.time                    = 10
palfx.mul                     = 256,200,100
palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0



[State 0, ShunShunRikka]
type     = ChangeState
trigger1 = Var(10) <= 0
value    = 101004

[State 0, ChangeState]
type = ChangeState
trigger1 = ParentDist X < 214
value = 161002
ctrl = 0

[Statedef 161002]
type            = A
movetype        = A
physics         = N
anim            = 40000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1
;-------------------------------------------------------------------------------

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9


[State 0, Orihime]
type           = Helper
triggerall     = NumHelper(14970) = 0
trigger1       = enemynear,MoveType = A && MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "MoveInterrupt"
ID             = 14970
stateno        = 14970
pos            = 0,0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------


;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = Time  = 1
time             = 1
value            = SCA,NT,ST,HT
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 7
ignorehitpause = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 161002
time             = 1
slot             = 0
ignorehitpause   = 1


[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1


[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
fv       = 0
value    = 27.0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

;---------Ike Tsubaki------------

[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type = VelSet
trigger1 = (!Time)
x = 9

[State 0, Shunshunrikka]
type       = VelSet
triggerall = pos y      > -85
triggerall = pos y      < -45
trigger1   = root,pos y  = 0
x          = 9
y          = 0

[State 0, Shunshunrikka]
type     = VelAdd  ;root FAR  ;tsubaki
trigger1 = (RootDist X < 0) && (Vel X > -9)
x        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root NEAR  ;tsubaki
trigger1 = (RootDist X > 0) && (Vel X < 9)
x        = 9

[State 0, Shunshunrikka]
type     = VelAdd ;root UP  ;tsubaki DOWN  ;GOING UP
trigger1 = (RootDist y < 65) && (Vel y > -9)&& root,pos y != 0
y        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root DOWN  ;tsubaki UP  ;GOING DOWN
trigger1 = (RootDist y > 65) && (Vel y < 9)&& root,pos y != 0
y        = 9

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveContact = 1
v = 0
value = 1

[State 0, Shunshunrikka]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                    = var(0) < 1
trigger1                      = 1
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S,SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
givepower                     = 10,5
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Medium
ground.type                   = High
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 30,8
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 10,10
guard.pausetime               = 12,12
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 30
ground.slidetime              = 20
guard.slidetime               = 20
guard.hittime                 = 20
air.hittime                   = 30
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-6
airguard.velocity             = -2,-0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = -0.5
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 0
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = S15850
sparkxy                       = -10,0
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
palfx.time                    = 10
palfx.mul                     = 256,200,100
palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, ShunShunRikka]
type     = ChangeState
trigger1 = Var(10) <= 0
value    = 101004

[State 0, Shunshunrikka]
type           = ChangeState
triggerall     = ParentDist X >= -9
triggerall     = ParentDist X <= 39
triggerall     = ParentDist Y <= 110
trigger1       = ParentDist Y > 10
value          = 101003
ignorehitpause = 1

;------------

;Ending Strike
[Statedef 101003]
type            = A
movetype        = A
physics         = N
anim            = 99999
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

[State 0, RemoveExplod]
type           = RemoveExplod
trigger1       = 1
id             = 40610
ignorehitpause = 1
[State 0, RemoveExplod]
type           = RemoveExplod
trigger1       = 1
id             = 40620
ignorehitpause = 1
[State 0, RemoveExplod]
type           = RemoveExplod
trigger1       = 1
id             = 40630
ignorehitpause = 1

[State 0, RemoveExplod]
type           = RemoveExplod
trigger1       = 1
id             = 14956
ignorehitpause = 1
[State 0, RemoveExplod]
type           = RemoveExplod
trigger1       = 1
id             = 14957
ignorehitpause = 1

[State 0, DestroySelf]
type           = DestroySelf
trigger1       = Time >= 3
ignorehitpause = 1

;Helper 01
[Statedef 101004]
type            = A
movetype        = A
physics         = N
anim            = 101000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

[State 0, RemoveExplod]
type     = RemoveExplod
trigger1 = 1
id       = 40610
[State 0, RemoveExplod]
type     = RemoveExplod
trigger1 = 1
id       = 40620
[State 0, RemoveExplod]
type     = RemoveExplod
trigger1 = 1
id       = 40630

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, AssertSpecial]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 0, Shunshunrikka]
type             = PlayerPush
trigger1         = 1
value            = 0
ignorehitpause   = 1

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type     = VarSet
trigger1 = time = 0
v        = 10
value    = 256

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
v        = 10
value    = -8

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = var(10),256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
triggerall     = time > 10
trigger1       = var(10) <= 0
ignorehitpause = 1


;--------------------------


[Statedef 161009]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 9
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0;GameTime % = 0
anim           = 14992
ID             = 14992
pos            = -20,0
postype        = p1
;facing         = 1
;vfacing        = 1
;bindtime       = 1
vel            = -.5,0
;accel          = 0,0
random         = 0,45
;removetime     = -2
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
;shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1



[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0;GameTime % = 0
anim           = 14992
ID             = 14992
pos            = -20,0
postype        = p1
vel            = -.5,0
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 0

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = BindToParent
trigger1       = 1
time           = 1
facing         = 1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = NumHelper(1000) <= 0 
trigger2       = Parent, StateNo = 101003 || Parent, StateNo = 101004
ignorehitpause = 1




;-------------



[Statedef 90640]
type            = A
movetype        = A
physics         = N
anim            = 65
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitcountpersist = 1
sprpriority     = 6

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, ShunShunRikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = BindToRoot
trigger1       = 1
time           = 1
facing         = 1
pos            = 21,-106
ignorehitpause =  1

[State 0, Shunshunrikka]
type           = SprPriority
Triggerall     = Facing = -1;1
trigger1       = 1
value          = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0.1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarAdd
trigger1       = Time > 2
fv             = 0
value          = 0.1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = 1
scale          = FVar(0),FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
v              = 0
value          = 256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarAdd
trigger1       = Time > 16
v              = 0
value          = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = Var(0),256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = animtime = 0 || root, MoveType = H || root,StateNo != 40000 && root,StateNo != 40100  && root,StateNo != 42000
ignorehitpause = 1



;--------------------------------------------------------------------------
;--------------------------------------- efectos --------------------------
;--------------------------------------------------------------------------


;KotenZanshun Helper
[Statedef 14996]
type            = A
movetype        = A
physics         = N
anim            = 99999
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
sprpriority     = 4

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 10000+Random%5
ID             = 10000
pos            = 0,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
persistent     = 9
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 9100
ID             = 9100
pos            = 0,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
;scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 3
ignorehitpause = 1


;----------------


[Statedef 14993]
type            = A
movetype        = A
physics         = N
anim            = 99999
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
sprpriority     = 4

[State 0, Orihime]
type           = PlaySnd
trigger1       = Time = 0
value          = S1000, 13
volume         = 999
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 10000
ID             = 10000
pos            = 0,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
persistent     = 9
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 10000
ID             = 10000
pos            = 0,0
postype        = p1
facing         = -1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
persistent     = 9
ignorehitpause = 1

[State 0, Orihime]
type            = BGPalFX
trigger1        = Time = 0
time            = 8
add             = 0,0,0
mul             = 256,156,56
sinadd          = 0,0,0,1
invertall       = 0
color           = 256
PalAdd          = 0,0,0
PalMul          = .5,.5,.5
trans           = add1
ignorehitpause  = 1

[State 0, Shunshunrikka]
type           = Helper
trigger1       = ( Time = 5 && stateno != 14994 )
helpertype     = normal
name           = "SFX"
ID             = 14994
stateno        = 14994
pos            = 0,0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 0

[State 0, Shunshunrikka]
type           = Helper
trigger1       = ( Time = 0 && stateno != 14998 )
helpertype     = normal
name           = "SFX"
ID             = 14998
stateno        = 14998
pos            = 0,10
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 0

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 9100
ID             = 9100
pos            = 0,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 10300
ID             = 911
pos            = 0,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.2,0.2
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 10700
ID             = 10700
pos            = 12,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 10701
ID             = 10701
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.5,0.5
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1

[State 0, Orihime]
type           = Explod
trigger1       = Time = 1
anim           = 8059
ID             = 8056
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = -1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = FVar(17),FVar(17)
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1
[State 0, ModifyExplod]
type           = ModifyExplod
trigger1       = 1
ID             = 8056
scale          = FVar(17),FVar(17)
ignorehitpause = 1
[State 0, VarSet]
type           = VarSet
trigger1       = Time = 0
fv             = 17
value          = 0.3
[State 0, VarAdd]
type           = VarAdd
trigger1       = 1
fv             = 17
value          = 0.1


[State 0, Orihime]
type           = Explod
trigger1       = Time = 1
anim           = 8057
ID             = 8057
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = -1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.2,FVar(18)
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1
[State 0, Orihime]
type           = Explod
trigger1       = Time = 1
anim           = 8057
ID             = 8057
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.2,FVar(18)
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1
[State 0, Orihime]
type           = Explod
trigger1       = Time = 1
anim           = 8058
ID             = 8058
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = -1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = FVar(19),0.2
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1
[State 0, Orihime]
type           = Explod
trigger1       = Time = 1
anim           = 8058
ID             = 8058
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = FVar(19),0.2
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1
[State 0, ModifyExplod]
type           = ModifyExplod
trigger1       = 1
ID             = 8057
scale          = 0.1,FVar(18)
ignorehitpause = 1
[State 0, ModifyExplod]
type           = ModifyExplod
trigger1       = 1
ID             = 8058
scale          = FVar(19),0.1
ignorehitpause = 1
[State 0, VarSet]
type           = VarSet
trigger1       = Time = 0
fv             = 18
value          = 0.1
[State 0, VarAdd]
type           = VarAdd
trigger1       = 1
fv             = 18
value          = 0.1
[State 0, VarSet]
type           = VarSet
trigger1       = Time = 0
fv             = 19
value          = 0.1
[State 0, VarAdd]
type           = VarAdd
trigger1       = 1
fv             = 19
value          = 0.1
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = add
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 20
ignorehitpause = 1


;----------------






;--------------------


;MoveInterruptHitsparks
[Statedef 14970]
type            = A
movetype        = A
physics         = N
anim            = 49909
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;         ------------------           ;
;--------|^ Helper's Core  ^|----------;
;         ------------------           ;

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = -99
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 10.0,0.2

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 0

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = Offset
Triggerall     = Facing = 1;-1
trigger1       = 1
x              = 80
y              = -60
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = Offset
Triggerall     = Facing = -1;1
trigger1       = 1
x              = -80
y              = -60
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = Time  = 10;30;
ignorehitpause = 1

[Statedef 14998]
type            = A
movetype        = A
physics         = N
anim            = 10306
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
sprpriority     = 999999


[State 0, Orihime]
type            = PalFX
trigger1        = 1;Time = 0
time            = 0
add             = 0,0,0
mul             = 156,156,256
sinadd          = 0,0,0,1
invertall       = 0
color           = 256
PalAdd          = 0,0,0
PalMul          = .5,.5,.5
trans           = add1
ignorehitpause  = 1

[State 0, AngleDraw]
type           = AngleDraw
trigger1       = 1
value          = IfElse(Var(20)=0,45.0,IfElse(Var(20)=1,90.0,IfElse(Var(20)=2,135.0,IfElse(Var(20)=3,180.0,IfElse(Var(20)=4,225.0,IfElse(Var(20)=5,270.0,IfElse(Var(20)=6,315.0,0)))))))
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = VarSet
trigger1 = Time = 0
v        = 20
value    = (0+Random%7)

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = add
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = animtime = 0
ignorehitpause = 1

[Statedef 14994]
type            = A
movetype        = A
physics         = N
anim            = 99999;10300;10100;14991
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
sprpriority     = 4

[State 0, Orihime]
type           = Explod
trigger1       = Time = 1
anim           = 8059
ID             = 8056
pos            = -12,0
postype        = p1
facing         = 1
vfacing        = -1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = FVar(17),FVar(17)
sprpriority    = 6
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1
[State 0, ModifyExplod]
type           = ModifyExplod
trigger1       = 1
ID             = 8056
scale          = FVar(17),FVar(17)
ignorehitpause = 1
[State 0, VarSet]
type           = VarSet
trigger1       = Time = 0
fv             = 17
value          = 0.3
[State 0, VarAdd]
type           = VarAdd
trigger1       = 1
fv             = 17
value          = 0.1

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = add
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 20
ignorehitpause = 1


;----------------------------------------------------------------------------------
                     
;----------------------------------------------------------------------------------

;----------------------------------------------------------------------------------


[Statedef 40000]
type            = S
movetype        = A
physics         = S
anim            = 4000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 101099
pos         = 21,-106
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90640
pos         = 26,-82
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1


[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1000,14
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1500,6
volume   = 256
channel  = 0

[State 0, Orihime]
type       = ChangeState
triggerall = command = "FF"
trigger1   = Time >= 27
value      = 100
ctrl       = 1

[State 0, Orihime]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;------------------






;Start
[Statedef 101099]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------

[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 9
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40601
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.1,0.1
sprpriority    = 7
ontop          = 0
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -2
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0
v        = 10
value    = 1

;------------------------HitSFX Helper------------------------------------------


[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type            = VelSet
trigger1        = 1
x               = 0
y               = 0
[State 0, KotenZanshun]
type            = VarSet
trigger1        = time = 0
v               = 0
value           = 0
[State 0, KotenZanshun]
type            = VarAdd
trigger1        = MoveContact = 1
v               = 0
value           = 1

[State 0, Kogeki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
trigger1                      = Time = 4 || Time = 8
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFD
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 10,4
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = 6
guard.velocity                = 6
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
;fall.xvelocity                = 0
;fall.yvelocity                = -4.5
;fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
;down.velocity                 = 0,0
;down.hittime                  = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = time >= 8
value    = 101000

;Strike 1
[Statedef 101000]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.07,0.07
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.08,0.08
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.16,0.16
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 101000
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type     = VelSet
trigger1 = AnimElem = 1
x        = 9
y        = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, TsubakiNoInochi]
type     = ParentVarAdd
trigger1 = 1
v        = 50
value    = 1

[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 0, Kogeki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 10,4
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hittime                  = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = root,var(50) = 62
value = 101001


;Strike 2
[Statedef 101001]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

;-------------------------------------------------------------------------------

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 101001
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0

[State 0, Shunshunrikka]
type            = VelSet
trigger1        = (!Time)
x               = 3
[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 5)
[State 0, Shunshunrikka]
type = VelSet
trigger1 = (!Time)
x = 9
[State 0, Shunshunrikka]
type = VelSet
trigger1 = vel y < -6
y = 1
[State 0, Shunshunrikka]
type = VelAdd
trigger1 = (ParentDist X < 0) && (Vel X > -6)
x = -0.2
[State 0, Shunshunrikka]
type = VelAdd
trigger1 = (ParentDist X > 0) && (Vel X < 6)
x = 0.2

[State 0, VarSet]
type       = VarSet
trigger1   = time = 0
v          = 0
value      = 0
[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 1000, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                      = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 10,4
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 7
guard.slidetime               = 7
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
;fall.xvelocity                = 0
;fall.yvelocity                = -4.5
;fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
;down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 1
;-------------------------------------
;-| Spark |---------------------------
sparkno                       =  -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 1000, ChangeState]
type     = ChangeState
trigger1 = ParentDist X < 214
value    = 101002
ctrl     = 0

;Strike 3
[Statedef 101002]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;-------------------------------------------------------------------------------

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 101002
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, AssertSpecial]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0
ignorehitpause = 1

;---------Ike Tsubaki------------

[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type = VelSet
trigger1 = (!Time)
x = 9

[State 0, Shunshunrikka]
type       = VelSet
triggerall = pos y > -85
triggerall = pos y < -45
trigger1   = root,pos y =0
x          = 9
y          = 0

[State 0, Shunshunrikka]
type     = VelAdd  ;root FAR  ;tsubaki
trigger1 = (RootDist X < 0) && (Vel X > -9)
x        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root NEAR  ;tsubaki
trigger1 = (RootDist X > 0) && (Vel X < 9)
x        = 9

[State 0, Shunshunrikka]
type     = VelAdd ;root UP  ;tsubaki DOWN  ;GOING UP
trigger1 = (RootDist y < 65) && (Vel y > -9)&& root,pos y != 0
y        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root DOWN  ;tsubaki UP  ;GOING DOWN
trigger1 = (RootDist y > 65) && (Vel y < 9)&& root,pos y != 0
y        = 9

[State 0, VarAdd]
type     = VarAdd
trigger1 = MoveContact = 1
v        = 0
value    = 1

[State 1000, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                      = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 10,4
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
;-------------------------------------
;-| Fall |----------------------------
fall                          = 1
;fall.xvelocity                = 0
;fall.yvelocity                = -4.5
;fall.recover                  = 1
;fall.recovertime              = 4
air.fall                      = 1
;-------------------------------------
;-| Down |----------------------------
;down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 1
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 1221, ChangeState]
type           = ChangeState
trigger1       = ParentDist X < 50
value          = 101003
ctrl           = 0


[Statedef 14200]
type            = A
movetype        = A
physics         = N
anim            = 99999
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
sprpriority     = 999999

[State 0, Orihime]
type           = Explod
trigger1       = Time = 0
anim           = 960
ID             = 960
pos            = 0,0
postype        = p1
facing         = 1
vfacing        = 1
bindtime       = 1
vel            = 0,0
accel          = 0,0
random         = 0,0
removetime     = -2
SuperMoveTime  = 9999
PauseMoveTime  = 9999
scale          = 0.3,0.3
sprpriority    = 9999999999
ontop          = 1
shadow         = 0,0,0
ownpal         = 1
ignorehitpause = 1

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = add
alpha          = 256,256
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 1.0
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 1
fv             = 0
value          = 1.0
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 2
fv             = 0
value          = 1.0
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 3
fv             = 0
value          = 0.9
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 4
fv             = 0
value          = 0.9
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 5
fv             = 0
value          = 0.9
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 6
fv             = 0
value          = 0.8
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 7
fv             = 0
value          = 0.8
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 8
fv             = 0
value          = 0.8
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 9
fv             = 0
value          = 0.7
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 10
fv             = 0
value          = 0.7
ignorehitpause = 1

;[State 0, Shunshunrikka]
;type           = VarSet
;trigger1       = Time = 14
;fv             = 0
;value          = 0.1
;ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = 1
scale          = FVar(0),FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type = Explod
trigger1 = (!Time)
anim = 14993
id = 14993
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = (IfElse(Random <= 499,Random/265,Random/(-265))),(IfElse(Random <= 499,Random/265,Random/(-265)))
accel = 0,0
random = 0,0
removetime = -2
supermove = 0
supermovetime = 999
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Shunshunrikka]
type = Explod
trigger1 = (!Time)
anim = 14993
id = 14993
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = (IfElse(Random <= 499,Random/265,Random/(-265))),(IfElse(Random <= 499,Random/265,Random/(-265)))
accel = 0,0
random = 0,0
removetime = -2
supermove = 0
supermovetime = 9999
pausemovetime = 9999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Shunshunrikka]
type = Explod
trigger1 = (!Time)
anim = 14993
id = 14993
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = (IfElse(Random <= 499,Random/265,Random/(-265))),(IfElse(Random <= 499,Random/265,Random/(-265)))
accel = 0,0
random = 0,0
removetime = -2
supermove = 0
supermovetime = 9999
pausemovetime = 9999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 10
ignorehitpause = 1



;-----------------------------------------------------------------

;-----------------------------------------------------------------

;-----------------------------------------------------------------


[Statedef 42000]
type            = S
movetype        = A
physics         = S
anim            = 4000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 42001
pos         = 21,-106
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90640
pos         = 26,-82
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1


[State 0, Orihime]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1



[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1000,14
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1500,5
volume   = 256
channel  = 0

[State 0, Orihime]
type       = ChangeState
triggerall = command = "FF"
trigger1   = Time >= 27
value      = 100
ctrl       = 1

[State 0, Orihime]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;------------------






;Start
[Statedef 42001]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------

[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 9
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40601
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.1,0.1
sprpriority    = 7
ontop          = 0
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -2
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0
v        = 10
value    = 1

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type            = VelSet
trigger1        = 1
x               = 0
y               = 0
[State 0, KotenZanshun]
type            = VarSet
trigger1        = time = 0
v               = 0
value           = 0
[State 0, KotenZanshun]
type            = VarAdd
trigger1        = MoveContact = 1
v               = 0
value           = 1

[State 0, Kogeki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
trigger1                      = Time = 4 || Time = 8
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFD
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = 6
guard.velocity                = 6
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
;fall.xvelocity                = 0
;fall.yvelocity                = -4.5
;fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
;down.velocity                 = 0,0
;down.hittime                  = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = time >= 8
value    = 42002

;Strike 1
[Statedef 42002]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.06,0.06
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.07,0.07
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.14,0.14
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 42002
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type     = VelSet
trigger1 = AnimElem = 1
x        = 9
y        = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, TsubakiNoInochi]
type     = ParentVarAdd
trigger1 = 1
v        = 50
value    = 1

[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 0, Kogeki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hittime                  = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = root,var(50) = 62
value = 42003


;Strike 2
[Statedef 42003]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 42003
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0

[State 0, Shunshunrikka]
type            = VelSet
trigger1        = (!Time)
x               = 3
[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 5)
[State 0, Shunshunrikka]
type = VelSet
trigger1 = (!Time)
x = 9
[State 0, Shunshunrikka]
type = VelSet
trigger1 = vel y < -6
y = 1
[State 0, Shunshunrikka]
type = VelAdd
trigger1 = (ParentDist X < 0) && (Vel X > -6)
x = -0.2
[State 0, Shunshunrikka]
type = VelAdd
trigger1 = (ParentDist X > 0) && (Vel X < 6)
x = 0.2

[State 0, VarSet]
type       = VarSet
trigger1   = time = 0
v          = 0
value      = 0
[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 1000, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                      = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 7
guard.slidetime               = 7
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
;fall.xvelocity                = 0
;fall.yvelocity                = -4.5
;fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
;down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 1
;-------------------------------------
;-| Spark |---------------------------
sparkno                       =  -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 1000, ChangeState]
type     = ChangeState
trigger1 = ParentDist X < 214
value    = 42004
ctrl     = 0

;Strike 3
[Statedef 42004]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;-------------------------------------------------------------------------------

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 42004
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, AssertSpecial]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0
ignorehitpause = 1

;---------Ike Tsubaki------------

[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type = VelSet
trigger1 = (!Time)
x = 9

[State 0, Shunshunrikka]
type       = VelSet
triggerall = pos y > -85
triggerall = pos y < -45
trigger1   = root,pos y =0
x          = 9
y          = 0

[State 0, Shunshunrikka]
type     = VelAdd  ;root FAR  ;tsubaki
trigger1 = (RootDist X < 0) && (Vel X > -9)
x        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root NEAR  ;tsubaki
trigger1 = (RootDist X > 0) && (Vel X < 9)
x        = 9

[State 0, Shunshunrikka]
type     = VelAdd ;root UP  ;tsubaki DOWN  ;GOING UP
trigger1 = (RootDist y < 65) && (Vel y > -9)&& root,pos y != 0
y        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root DOWN  ;tsubaki UP  ;GOING DOWN
trigger1 = (RootDist y > 65) && (Vel y < 9)&& root,pos y != 0
y        = 9

[State 0, VarAdd]
type     = VarAdd
trigger1 = MoveContact = 1
v        = 0
value    = 1

[State 1000, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                      = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
;fall.xvelocity                = 0
;fall.yvelocity                = -4.5
;fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
;down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 1
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 1221, ChangeState]
type           = ChangeState
trigger1       = ParentDist X < 50
value          = 101003
ctrl           = 0

[Statedef 101060]
type            = A
movetype        = A
physics         = N
anim            = 101000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

[State 0, RemoveExplod]
type     = RemoveExplod
trigger1 = 1
id       = 40610
[State 0, RemoveExplod]
type     = RemoveExplod
trigger1 = 1
id       = 40620
[State 0, RemoveExplod]
type     = RemoveExplod
trigger1 = 1
id       = 40630

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, AssertSpecial]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 0, Shunshunrikka]
type             = PlayerPush
trigger1         = 1
value            = 0
ignorehitpause   = 1

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type     = VarSet
trigger1 = time = 0
v        = 10
value    = 256

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
v        = 10
value    = -8

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = var(10),256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
triggerall     = time > 10
trigger1       = var(10) <= 0
ignorehitpause = 1


;-----------------------------------------------------------------------------------





[Statedef 40300]
type            = A
movetype        = A
physics         = N
anim            = 43000
velset          = 0,-2
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0, Orihime]
type       = Helper
triggerall = NumHelper(1000) = 0
trigger1   = AnimElem = 3
helpertype = normal
name       = "Athena"
ID         = 1000
stateno    = 163000
pos         = 10,-65
postype    = p1
facing     = 0
keyctrl    = 0
ownpal     = 1
size.xscale = 0.1
size.yscale = 0.1
ignorehitpause = 1



[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1

[State 0, Orihime]
type        = Helper
trigger1    = time = 8
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90400
pos         = -15,-76
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1
ignorehitpause = 1

[State 0, Orihime]
type = VelAdd
trigger1 = 1
y = 0.20

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S240,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 1
value    = S1500,7
volume   = 256
channel  = 0

[State 0, Orihime]
type     = ChangeState
trigger1 = Pos Y >= 0
value    = 50
ctrl     = 0


[Statedef 163000]
type            = A
movetype        = A
physics         = N
anim            = 40000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1
ignorehitpause = 1

[State 0, Orihime]
type        = Helper
triggerall  = NumHelper(655) = 0
trigger1    = Time = 0
helpertype  = normal
name        = "Tsubaki"
ID          = 161009
stateno     = 161009
pos         = 0,0
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1
ignorehitpause = 1

[State 0, Bouseki]
type           = Explod
triggerall     = NumExplod(40620) = 0
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.06,0.06
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Bouseki]
type           = Explod
triggerall     = NumExplod(40630) = 0
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.12,0.12
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0 && PrevStateNo != 5020
v        = 10
value    = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1
;-------------------------------------------------------------------------------
;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 7
ignorehitpause = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = Time  = 1
time             = 1
value            = SCA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 163000
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 1000, Kurae]
type     = VelSet
trigger1 = Time = 3
x        = 9
y        = 9

[State 0, Shunshunrikka]
type           = null;Offset
Triggerall     = Facing = 1;1
trigger1       = 1
x              = 8
y              = -69
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = null;Offset
Triggerall     = Facing = -1;1
trigger1       = 1
x              = -8
y              = -69
ignorehitpause = 1

[State 0, TsubakiNoInochi]
type     = ParentVarAdd
trigger1 = 1
v        = 50
value    = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
fv       = 0
value    = 14.0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = FVar(0)
ignorehitpause = 1

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0
v        = 0
value    = 0

[State 0, VarAdd]
type     = VarAdd
trigger1 = MoveContact = 1
v        = 0
value    = 1

[State 0, Shunshunrikka]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                    = var(0) < 1
trigger1                      = 1
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S,SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
givepower                     = 10,5
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Medium
ground.type                   = High
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 15,8
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 10,10
guard.pausetime               = 12,12
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S310,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 30
ground.slidetime              = 20
guard.slidetime               = 20
guard.hittime                 = 20
air.hittime                   = 30
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-6
airguard.velocity             = -2,-0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = -0.5
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 0
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = S15850
sparkxy                       = -10,0
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 10
;palfx.mul                     = 256,200,100
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, ShunShunRikka]
type     = ChangeState
trigger1 = Var(10) <= 0
value    = 101004

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = root,var(50) = 52
value    = 163001

[Statedef 163001]
type            = A
movetype        = A
physics         = N
anim            = 40000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1
;-------------------------------------------------------------------------------
;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9



;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 7
ignorehitpause = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = Time  = 1
time             = 1
value            = SCA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 163001
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
fv       = 0
value    = 14.0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = null;Offset
trigger1 = 1
x        = 0
y        = -55

[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type     = VelSet
trigger1 = Time = 0
x        = 9
y        = -9

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveContact = 1
v = 0
value = 1

[State 0, Shunshunrikka]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                    = var(0) < 1
trigger1                      = 1
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S,SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
givepower                     = 10,5
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Medium
ground.type                   = High
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 15,8
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 10,10
guard.pausetime               = 12,12
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S310,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 30
ground.slidetime              = 20
guard.slidetime               = 20
guard.hittime                 = 20
air.hittime                   = 30
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-6
airguard.velocity             = -2,-0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = -0.5
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 0
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = S15850
sparkxy                       = -10,0
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
palfx.time                    = 10
palfx.mul                     = 256,200,100
palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0



[State 0, ShunShunRikka]
type     = ChangeState
trigger1 = Var(10) <= 0
value    = 101004

[State 0, Shunshunrikka]
type           = ChangeState
triggerall     = ParentDist X >= -9
triggerall     = ParentDist X <= 9
triggerall     = ParentDist Y <= 100
trigger1       = ParentDist Y > 10
value          = 101003
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = ParentDist Y >= -100
value    = 163002

[Statedef 163002]
type            = A
movetype        = A
physics         = N
anim            = 40000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-------------------------------------------------------------------------------
;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1
;-------------------------------------------------------------------------------
;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 7
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = 256,256
ignorehitpause = 1

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = Time  = 1
time             = 1
value            = SCA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 163002
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
scale          = 0.5,0.5

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = VarAdd
trigger1 = 1
fv       = 0
value    = 14.0

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = null;Offset
trigger1 = 1
x        = 0
y        = -55

;---------Ike Tsubaki------------

[State 0, Shunshunrikka]
type     = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type     = VelSet
trigger1 = (!Time)
x        = 9
y        = -9

[State 0, Shunshunrikka]
type       = VelSet
triggerall = pos y      > -85
triggerall = pos y      < -45
trigger1   = root,pos y  = 0
x          = 9
y          = 0

[State 0, Shunshunrikka]
type     = VelAdd  ;root FAR  ;tsubaki
trigger1 = (RootDist X < 0) && (Vel X > -9)
x        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root NEAR  ;tsubaki
trigger1 = (RootDist X > 0) && (Vel X < 9)
x        = 9

[State 0, Shunshunrikka]
type     = VelAdd ;root UP  ;tsubaki DOWN  ;GOING UP
trigger1 = (RootDist y < 65) && (Vel y > -9)&& root,pos y != 0
y        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root DOWN  ;tsubaki UP  ;GOING DOWN
trigger1 = (RootDist y > 65) && (Vel y < 9)&& root,pos y != 0
y        = 9

[State 0, VarAdd]
type     = VarAdd
trigger1 = MoveContact = 1
v        = 0
value    = 1

[State 0, Shunshunrikka]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                    = var(0) < 1
trigger1                      = 1
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S,SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
givepower                     = 10,5
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = Medium
ground.type                   = High
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 15,8
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 10,10
guard.pausetime               = 12,12
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S310,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 30
ground.slidetime              = 20
guard.slidetime               = 20
guard.hittime                 = 20
air.hittime                   = 30
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-6
airguard.velocity             = -2,-0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = -0.5
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 0
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 = S15850
sparkxy                       = -10,0
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
palfx.time                    = 10
palfx.mul                     = 256,200,100
palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0


[State 0, ShunShunRikka]
type     = ChangeState
trigger1 = Var(10) <= 0
value    = 101004

[State 0, Shunshunrikka]
type           = ChangeState
triggerall     = ParentDist X >= -9
triggerall     = ParentDist X <= 9
triggerall     = ParentDist Y <= 100
trigger1       = ParentDist Y > 10
value          = 101003
ignorehitpause = 1




[Statedef 90400]
type            = A
movetype        = A
physics         = N
anim            = 65
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitcountpersist = 1
sprpriority     = 6

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, ShunShunRikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 0, Shunshunrikka]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Shunshunrikka]
type           = BindToRoot
trigger1       = 1
time           = 1
facing         = 1
pos            = 82,-6
ignorehitpause =  1

[State 0, Shunshunrikka]
type           = SprPriority
Triggerall     = Facing = -1;1
trigger1       = 1
value          = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
fv             = 0
value          = 0.1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarAdd
trigger1       = Time > 2
fv             = 0
value          = 0.1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = AngleDraw
trigger1       = 1
value          = 1
scale          = FVar(0),FVar(0)
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarSet
trigger1       = Time = 0
v              = 0
value          = 256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = VarAdd
trigger1       = Time > 16
v              = 0
value          = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = Trans
trigger1       = 1
trans          = addalpha
alpha          = Var(0),256
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = animtime = 0  || root,StateNo = 53 || root, MoveType = H
ignorehitpause = 1


:--------------------------------------------------------------------------------


[Statedef 44000]
type            = A
movetype        = A
physics         = N
anim            = 43000
velset          = 0,-2
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -4

[State 0, Orihime]
type        = Helper
triggerall  = NumHelper(1000) = 0
trigger1   = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 104099
pos         = 10,-65
postype     = p1
facing      = 0
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S1000,14
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 3
value    = S1500,5
volume   = 256
channel  = 0

[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type        = Helper
trigger1    = Time = 8
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90400
pos         = -17,-76
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type = VelAdd
trigger1 = 1
y = 0.20

[State 0, Orihime]
type     = ChangeState
trigger1 = Pos Y >= 0
value    = 50
ctrl     = 0


;Start
[Statedef 104099]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------

[State Rotation]
Type           = AngleDraw
trigger1       = 1
;value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 9
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40601
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.1,0.1
sprpriority    = 7
ontop          = 0
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -2
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0
v        = 10
value    = 1

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type            = VarSet
trigger1        = time = 0
v               = 0
value           = 0
[State 0, KotenZanshun]
type            = VarAdd
trigger1        = MoveContact = 1
v               = 0
value           = 1

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = time >= 8
value    = 104000

;Strike 1
[Statedef 104000]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 9,9
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.07,0.07
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.08,0.08
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.16,0.16
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 104000
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = PlayerPush
trigger1         = 1
value            = 0
[State 0, KotenZanshun]
type             = ScreenBound
trigger1         = 1
value            = 0
movecamera       = 0,0
[State 0, Orihime]
type             = PlaySnd
trigger1         = Time = 0
value            = S1000,12
volume           = 98
channel          = -1

[State 0, TsubakiNoInochi]
type     = ParentVarAdd
trigger1 = 1
v        = 50
value    = 1

[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 13,6
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 99
guard.slidetime               = 99
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, ChangeState]
type     = ChangeState
trigger1 = root,var(50) = 62
value    = 104001

;Strike 2
[Statedef 104001]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 9,-9
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------



[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 104001
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = PlayerPush
trigger1         = 1
value            = 0
[State 0, KotenZanshun]
type             = ScreenBound
trigger1         = 1
value            = 0
movecamera       = 0,0

[State 0, Shunshunrikka]
type          = Turn
trigger1      = (ParentDist X < 56)

[State 0, VarSet]
type       = VarSet
trigger1   = time = 0
v          = 0
value      = 0
[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 0, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 13,6
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 99
guard.slidetime               = 99
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -4
guard.velocity                = -8
air.velocity                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Shunshunrikka]
type       = ChangeState
triggerall = ParentDist X >= -9
triggerall = ParentDist X <= 4
triggerall = ParentDist Y >= -9
trigger1   = ParentDist Y <= 9
value      = 101003
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = ParentDist Y >= -100
value    = 104002


;Strike 3
[Statedef 104002]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 9,-9
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 10
value    = S1000,12
volume   = 98
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,14
volume   = 98
channel  = -1


;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 104002
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, AssertSpecial]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

;-------------------Velocity----------------------------

[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type       = VelSet
triggerall = pos y > -85
triggerall = pos y < -45
trigger1   = root,pos y =0
x          = 9
y          = 0

[State 0, Shunshunrikka]
type     = VelAdd  ;root FAR  ;tsubaki
trigger1 = (RootDist X < 0) && (Vel X > -9)
x        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root NEAR  ;tsubaki
trigger1 = (RootDist X > 0) && (Vel X < 9)
x        = 9

[State 0, Shunshunrikka]
type     = VelAdd ;root UP  ;tsubaki DOWN  ;GOING UP
trigger1 = (RootDist y < 65) && (Vel y > -9)&& root,pos y != 0
y        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root DOWN  ;tsubaki UP  ;GOING DOWN
trigger1 = (RootDist y > 65) && (Vel y < 9)&& root,pos y != 0
y        = 9

[State 0, VarAdd]
type     = VarAdd
trigger1 = MoveContact = 1
v        = 0
value    = 1

[State 0, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 13,6
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 99
guard.slidetime               = 99
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -4
guard.velocity                = -8
air.velocity                  = -2,-3
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
;-------------------------------------
;-| Fall |----------------------------
fall                          = 1
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 1
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0


[State 0, Shunshunrikka]
type           = ChangeState
triggerall     = ParentDist X >= -9
triggerall     = ParentDist X <= 9
triggerall     = ParentDist Y <= 100;45
trigger1       = ParentDist Y > 10;65
value          = 101003
ignorehitpause = 1




;-----------------------------------------------------------------------------------------------------


[Statedef 40350]
type            = A
movetype        = A
physics         = N
anim            = 43000
velset          = 0,-2
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -4

[State 0, Orihime]
type        = Helper
triggerall  = NumHelper(1000) = 0
trigger1   = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 194099
pos         = 10,-65
postype     = p1
facing      = 0
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 1
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S1000,14
volume   = 99
channel  = 0

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 3
value    = S1500,6
volume   = 256


[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type        = Helper
trigger1    = Time = 8
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90400
pos         = -17,-76
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type = VelAdd
trigger1 = 1
y = 0.20

[State 0, Orihime]
type     = ChangeState
trigger1 = Pos Y >= 0
value    = 50
ctrl     = 0


;Start
[Statedef 194099]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------

[State Rotation]
Type           = AngleDraw
trigger1       = 1
;value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 9
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40601
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.1,0.1
sprpriority    = 7
ontop          = 0
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -2
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarSet]
type     = VarSet
trigger1 = time = 0
v        = 10
value    = 1

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, KotenZanshun]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type            = VarSet
trigger1        = time = 0
v               = 0
value           = 0
[State 0, KotenZanshun]
type            = VarAdd
trigger1        = MoveContact = 1
v               = 0
value           = 1

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = time >= 8
value    = 194000

;Strike 1
[Statedef 194000]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 9,9
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

;-[ Koten Zanshun ]-------------------------------------------------------------


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.06,0.06
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.07,0.07
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.14,0.14
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;
;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 194000
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = PlayerPush
trigger1         = 1
value            = 0
[State 0, KotenZanshun]
type             = ScreenBound
trigger1         = 1
value            = 0
movecamera       = 0,0
[State 0, Orihime]
type             = PlaySnd
trigger1         = Time = 0
value            = S1000,12
volume           = 98
channel          = -1

[State 0, TsubakiNoInochi]
type     = ParentVarAdd
trigger1 = 1
v        = 50
value    = 1

[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 99
guard.slidetime               = 99
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, ChangeState]
type     = ChangeState
trigger1 = root,var(50) = 62
value    = 194001

;Strike 2
[Statedef 194001]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 9,-9
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9

;-------------------------------------------------------------------------------

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 194001
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = PlayerPush
trigger1         = 1
value            = 0
[State 0, KotenZanshun]
type             = ScreenBound
trigger1         = 1
value            = 0
movecamera       = 0,0

[State 0, Shunshunrikka]
type          = Turn
trigger1      = (ParentDist X < 56)

[State 0, VarSet]
type       = VarSet
trigger1   = time = 0
v          = 0
value      = 0
[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 0
value      = 1
persistent = 1

[State 0, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
;trigger1                      = gametime%5 = 0
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 99
guard.slidetime               = 99
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0

[State 0, Shunshunrikka]
type       = ChangeState
triggerall = ParentDist X >= -9
triggerall = ParentDist X <= 4
triggerall = ParentDist Y >= -9
trigger1   = ParentDist Y <= 9
value      = 101003
ignorehitpause = 1

[State 0, Shunshunrikka]
type     = ChangeState
trigger1 = ParentDist Y >= -100
value    = 194002


;Strike 3
[Statedef 194002]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 9,-9
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1


;------Rotation-----------
[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

;-[ Tsubaki HP ]----------------------------------------------------------------

[State 0, VarAdd]
type       = VarAdd
triggerall = PrevStateNo = 5020
trigger1   = time = 1
v          = 10
value      = -1

[State 0, ChangeState]
type     = ChangeState
trigger1 = var(10) <= 0
value    = 101060

;------------------------HitSFX Helper------------------------------------------

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9


;-------------------------------------------------------------------------------

;         ------------------
;--------|^ Helper's Core  ^|----------
;         ------------------

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1

[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 194002
time             = 1
slot             = 0
ignorehitpause   = 1

[State 0, AssertSpecial]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1

[State 1000, PlayerPush]
type     = PlayerPush
trigger1 = 1
value    = 0

[State 1000, ScreenBound]
type       = ScreenBound
trigger1   = 1
value      = 0
movecamera = 0,0

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.2,0.2
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1
[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.1,0.1
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

;-------------------Velocity----------------------------

[State 0, Shunshunrikka]
type = Turn
trigger1 = (ParentDist X < 56)

[State 0, Shunshunrikka]
type       = VelSet
triggerall = pos y > -85
triggerall = pos y < -45
trigger1   = root,pos y =0
x          = 9
y          = 0

[State 0, Shunshunrikka]
type     = VelAdd  ;root FAR  ;tsubaki
trigger1 = (RootDist X < 0) && (Vel X > -9)
x        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root NEAR  ;tsubaki
trigger1 = (RootDist X > 0) && (Vel X < 9)
x        = 9

[State 0, Shunshunrikka]
type     = VelAdd ;root UP  ;tsubaki DOWN  ;GOING UP
trigger1 = (RootDist y < 65) && (Vel y > -9)&& root,pos y != 0
y        = -9

[State 0, Shunshunrikka]
type     = VelAdd ;root DOWN  ;tsubaki UP  ;GOING DOWN
trigger1 = (RootDist y > 65) && (Vel y < 9)&& root,pos y != 0
y        = 9

[State 0, VarAdd]
type     = VarAdd
trigger1 = MoveContact = 1
v        = 0
value    = 1

[State 0, Tsubaki]
type                          = HitDef
;-------------------------------------
;-| Trigger |-------------------------
triggerall                     = var(0) < 9
trigger1                      = gametime%5 = 0
;-------------------------------------
;-| HitDef |--------------------------
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
;-------------------------------------
;-| Power |---------------------------
;getpower                      = Var(53),Var(54)
;givepower                     = Var(53),Var(54)
;-------------------------------------
;-| Team |----------------------------
;affectteam                    = E     ;B,F
;hitonce                       = 1
;-------------------------------------
;-| Animtype |------------------------
animtype                      = light
ground.type                   = Low
;air.type                      = light
;air.animtype                  = light
;fall.animtype                 = Back
;-------------------------------------
;-| Damage |--------------------------
damage                        = 7,3
;fall.damage                   = 0
;-------------------------------------
;-| Pause |---------------------------
pausetime                     = 7,7
guard.pausetime               = 7,7
;ignorehitpause                =
;-------------------------------------
;-| SoundFX |-------------------------
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
;-------------------------------------
;-| Hittime |-------------------------
ground.hittime                = 14
ground.slidetime              = 99
guard.slidetime               = 99
guard.hittime                 = 14
air.hittime                   = 14
;-------------------------------------
;-| Velocities |----------------------
;yaccel                        = 0.5
ground.velocity               = -8
guard.velocity                = -8
                  = 0,-7
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
;-------------------------------------
;-| Fall |----------------------------
;fall                          = 0
fall.xvelocity                = 0
fall.yvelocity                = 0
fall.recover                  = 1
;fall.recovertime              = 4
;air.fall                      = 0
;-------------------------------------
;-| Down |----------------------------
down.velocity                 = 0,0
;down.hit                      = 0
;down.bounce                   = 0
;-------------------------------------
;-| Guard |---------------------------
;guard.ctrl                    = 0
;guard.dist                    = 320
;airguard.ctrl                 = 0
;-------------------------------------
;-| Dist |----------------------------
;mindist                       = 0,0
;maxdist                       = 0,0
;snap                          = 0,0
;-------------------------------------
;-| Facing |--------------------------
;p1facing                      = 0
;p1getp2facing                 = 0
;p2facing                      = 1
;-------------------------------------
;-| Stateno |-------------------------
;p1stateno                     = 0
;p2stateno                     = 0
;p2getp1state                  = 1
;forcestand                    = 0
;-------------------------------------
;-| Chain |---------------------------
;id                            = -1
;chainID                       = -1
;nochainID                     = 1
;-------------------------------------
;-| Kill |----------------------------
;kill                          = 1
;guard.kill                    = 1
;fall.kill                     = 1
;-------------------------------------
;-| Hits |----------------------------
numhits                       = 1
;air.juggle                    = 0
persistent                    = 3
;-------------------------------------
;-| Spark |---------------------------
sparkno                       = -1
guard.sparkno                 =  -1
sparkxy                       = -10,-70
;-------------------------------------
;-| Priority |------------------------
;sprpriority                   = 1
;p1sprpriority                 = 0
;p2sprpriority                 = 0
;-------------------------------------
;-| SFX  |----------------------------
;palfx.time                    = 0
;palfx.mul                     = 0,0,0
;palfx.add                     = 0,0,0
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
;envshake.phase                = 0
;fall.envshake.time            = 0,0
;fall.envshake.freq            = 0
;fall.envshake.ampl            = 0
;fall.envshake.phase           = 0


[State 0, Shunshunrikka]
type           = ChangeState
triggerall     = ParentDist X >= -9
triggerall     = ParentDist X <= 9
triggerall     = ParentDist Y <= 100;45
trigger1       = ParentDist Y > 10;65
value          = 101003
ignorehitpause = 1


;---------------------------------------------------------------

[Statedef 1500]
type = A
movetype = A
physics = S
juggle = 0
anim = 1500
poweradd = 80
velset = 0,0,0
ctrl = 0 

[State 2602,1]
type=playsnd
trigger1 = time = 0
value = 900,0

[State 2602,1]
type=velset
trigger1 = 1
x = 5
y = 7

[State 2602,1]
type=playsnd
trigger1 = time = 5
value = 1500,6
volume = 256

[State -3, Explod]
type = Explod
trigger1 = MoveHit = 1 
anim = 7020
pos = (Floor(p2bodydist X + 19)),0
removetime = 24
postype = P1
facing         = 1
keyctrl        = 0
ownpal         = 0
ignorehitpause = 1
persistent     = 9
sprpriority = 5

; helpers speciales

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 19)),0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9

[State 2602, 2]
type = HitDef
trigger1 = animelem >= 2
attr = A, SA
damage    = 10
guardflag = HA
pausetime = 10
SPARKNO = S-1
sparkxy = 0
hitsound   = S250,1
guardsound = S320,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 0  
p1stateno = 1503
guard.velocity = -4.5
air.type = High
air.velocity = 0
guard.velocity = 0
airguard.velocity = 0



[State 2402,3]
type=ChangeState
trigger1 = MoveGuarded = 1
value = 661
CTRL = 0

[State 2402,3]
type=ChangeState
trigger1 = pos Y > 0
value = 52
CTRL = 1

[Statedef 1503]
type = S
movetype = A
physics = S
juggle = 0
anim = 1503
velset = 0,0
ctrl = 0 

[State 911, 7]
type = PosSet
trigger1 = Time = 0
y = -75

[State 913, 2]
type = VelSet
triggerall = Time = 0
trigger1 = P2bodydist X <= 5
x = .90

[State 913, 2]
type = VelSet
triggerall = Time = 0
trigger1 = P2bodydist X >= 5
x = 5

[State 2603,1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 6
attr = A, SA
damage    = 3
guardflag = HA
pausetime = 0
SPARKNO=S901
sparkxy=0,-0
hitsound   = S240,1
guardsound = S310,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 0  
guard.velocity = -4.5
air.type = High
air.velocity = 0
guard.velocity = 0
airguard.velocity =0

[State 2603,1]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage    = 3
guardflag = HA
pausetime = 0
SPARKNO=S901
sparkxy=0,-0
hitsound   = S250,1
guardsound = S310,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 0  
guard.velocity = -4.5
air.type = High
air.velocity = 0
guard.velocity = 0
airguard.velocity =0

[State -3, Explod]
type = Explod
trigger1 = MoveHit = 1 
anim = 7021
pos = (Floor(p2bodydist X + 19)),0
postype = P1
facing         = 1
keyctrl        = 0
ownpal         = 0
ignorehitpause = 1
persistent     = 9
sprpriority = 5

; helpers speciales

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 19)),0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9


[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 2) && (time = 20))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 5) && (time = 40))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 8) && (time = 60))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 11) && (time = 80))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 14) && (time = 100))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = p2life <= 0
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = hitcount = 15
value = 1504
CTRL = 0


[Statedef 1504]
type = S
movetype = A
physics = S
juggle = 0
anim = 1504
velset = 0, 0
ctrl = 0 

[State 2602,1]
type=playsnd
trigger1 = time = 0
value = 250,0

[State 660, afterimage]
type = AfterImage
trigger1 = time = 0
time = 40
FrameGap = 2
length = 10
PalBright   =   0,  0,  0
PalContrast = 107,107,222 ;blue 
PalAdd      =   0,  0,  0
PalMul      =  1,1,1
Trans = Add1

[State 2603,1]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 35,5
guardflag = HA
pausetime = 0
SPARKNO=S902
sparkxy=0,0
hitsound   = S1000,10
guardsound = S320,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
fall=1
ground.velocity = -4,-4  
guard.velocity = -4.5
air.type = High
air.velocity = 10,-10
guard.velocity = 0
airguard.velocity =0

[State 660 , 4]
type = ChangeState
trigger1 = MoveContact = 1
value = 661


[State 2703, 2]
type = ChangeState
trigger1 = time = 40
value = 52
CTRL = 0


;---------------------------------------------------------------------

[Statedef 1550]
type = A
movetype = A
physics = S
juggle = 0
anim = 1500
poweradd = 80
velset = 0,0,0
ctrl = 0 

[State 2602,1]
type=playsnd
trigger1 = time = 0
value = 900,0

[State 2602,1]
type=velset
trigger1 = 1
x = 5
y = 6

[State 2602,1]
type=playsnd
trigger1 = time = 5
value = 1500,5
volume = 256

[State -3, Explod]
type = Explod
trigger1 = MoveHit = 1 
anim = 7021
pos = (Floor(p2bodydist X + 19)),0
removetime = 24
postype = P1
facing         = 1
keyctrl        = 0
ownpal         = 0
ignorehitpause = 1
persistent     = 9
sprpriority = 5

; helpers speciales

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 19)),0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9

[State 2602, 2]
type = HitDef
trigger1 = animelem >= 2
attr = A, SA
damage    = 10
guardflag = HA
pausetime = 10
SPARKNO = S901
sparkxy = 0
hitsound   = S250,1
guardsound = S320,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 0  
p1stateno = 1553
guard.velocity = -4.5
air.type = High
air.velocity = 0
guard.velocity = 0
airguard.velocity = 0

[State 2402,3]
type=ChangeState
trigger1 = MoveGuarded = 1
value = 661
CTRL = 0

[State 2402,3]
type=ChangeState
trigger1 = pos Y > 0
value = 52
CTRL = 1

[Statedef 1553]
type = S
movetype = A
physics = S
juggle = 0
anim = 1503
velset = 0,0
ctrl = 0 

[State 911, 7]
type = PosSet
trigger1 = Time = 0
y = -75


[State 913, 2]
type = VelSet
triggerall = Time = 0
trigger1 = P2bodydist X <= 5
x = .90

[State 913, 2]
type = VelSet
triggerall = Time = 0
trigger1 = P2bodydist X >= 5
x = 5

[State 2603,1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 6
attr = A, SA
damage    = 3
guardflag = HA
pausetime = 0
SPARKNO=S901
sparkxy=0,-0
hitsound   = S240,1
guardsound = S310,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 0  
guard.velocity = -4.5
air.type = High
air.velocity = 0
guard.velocity = 0
airguard.velocity =0

[State -3, Explod]
type = Explod
trigger1 = MoveHit = 1 
anim = 7020
pos = (Floor(p2bodydist X + 19)),0
postype = P1
facing         = 1
keyctrl        = 0
ownpal         = 0
ignorehitpause = 1
persistent     = 9
sprpriority = 5

; helpers speciales

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveHit = 1 && (P2StateNo = 5000 || P2StateNo = 5010 || P2StateNo = 5020 || P2MoveType = H)
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 19)),0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
persistent     = 9

[State 2603,1]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage    = 3
guardflag = HA
pausetime = 0
SPARKNO=S901
sparkxy=0,-0
hitsound   = S250,1
guardsound = S310,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = 0  
guard.velocity = -4.5
air.type = High
air.velocity = 0
guard.velocity = 0
airguard.velocity =0

[State 2703, 2]
type=ChangeState
trigger1 = hitcount = 8
value = 1554
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 2) && (time = 20))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 5) && (time = 40))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = ((hitcount <= 7) && (time = 60))
value = 661
CTRL = 0

[State 2703, 2]
type=ChangeState
trigger1 = p2life <= 0
value = 661
CTRL = 0

[Statedef 1554]
type = S
movetype = A
physics = S
juggle = 0
anim = 1504
velset = 0, 0
ctrl = 0 

[State 2602,1]
type=playsnd
trigger1 = time = 0
value = 250,0

[State 660, afterimage]
type = AfterImage
trigger1 = time = 0
time = 40
FrameGap = 2
length = 10
PalBright   =   0,  0,  0
PalContrast = 107,107,222 ;blue 
PalAdd      =   0,  0,  0
PalMul      =  1,1,1
Trans = Add1


[State 2603,1]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 35,5
guardflag = HA
pausetime = 0
SPARKNO=S902
sparkxy=0,0
hitsound   = S1000,10
guardsound = S320,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
fall=1
ground.velocity = -4,-4  
guard.velocity = -4.5
air.type = High
air.velocity = 10,-10
guard.velocity = 0
airguard.velocity =0


[State 660 , 4]
type = ChangeState
trigger1 = MoveContact = 1
value = 661


[State 2703, 2]
type = ChangeState
trigger1 = time = 40
value = 52
CTRL = 0

;-----------------------------------------------------------------------------------------


[Statedef 40030]
type            = S
movetype        = A
physics         = S
anim            = 4000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 40331
pos         = 21,-106
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90640
pos         = 26,-82
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1


[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1000,14
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1500,6
volume   = 256
channel  = 0

[State 0, Orihime]
type       = ChangeState
triggerall = command = "FF"
trigger1   = Time >= 27
value      = 100
ctrl       = 1

[State 0, Orihime]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 40331]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40331
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.07,0.07
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40331
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.08,0.08
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40331
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.16,0.16
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = -1
bindtime       = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 3101
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type     = VelSet
trigger1 = AnimElem = 1
x        = 9
y        = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1


[State 0, Shunshunrikka]
type           = Helper
trigger1       = Movehit = 1 
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



[State 0, Kogeki]
type                          = HitDef
trigger1                      = gametime%5 = 0
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
animtype                      = Light
ground.type                   = high
damage                        = 10,4
pausetime                     = 7,7
guard.pausetime               = 7,7
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
ground.velocity               = -6
guard.velocity                = -6
air.velocity                  = -3,-1
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
down.velocity                 = 0,0
numhits                       = 1
persistent                    = 3
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))
fall = 1
p2stateno = 5600

[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.3,0.3
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.15,0.15
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State -3,remove efecto]
type = RemoveExplod
trigger1       = time = 90
ID = 40331
ignorehitpause = 1

[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 90
ignorehitpause = 1

;-----------------------------------


[Statedef 40020]
type            = S
movetype        = A
physics         = S
anim            = 4000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 40021
pos         = 21,-106
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90640
pos         = 26,-82
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1


[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1000,14
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1500,5
volume   = 256
channel  = 0

[State 0, Orihime]
type       = ChangeState
triggerall = command = "FF"
trigger1   = Time >= 27
value      = 100
ctrl       = 1

[State 0, Orihime]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 40021]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.06,0.06
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = 90
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.07,0.07
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = 90
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.14,0.14
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = 90
bindtime       = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 3101
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type     = VelSet
trigger1 = AnimElem = 1
x        = 9
y        = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1


[State 0, Shunshunrikka]
type           = Helper
trigger1       = Movehit = 1 
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



[State 0, Kogeki]
type                          = HitDef
trigger1                      = gametime%5 = 0
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
animtype                      = Light
ground.type                   = high
damage                        = 7,3
pausetime                     = 7,7
guard.pausetime               = 7,7
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
ground.velocity               = -10
guard.velocity                = -10
air.velocity                  = -3,-1
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
down.velocity                 = 0,0
numhits                       = 1
persistent                    = 3
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))


[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.3,0.3
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.15,0.15
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1


[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 90
ignorehitpause = 1

;-----------------------------------


[Statedef 40010]
type            = S
movetype        = A
physics         = S
anim            = 4000
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority     = -2

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "Tsubaki"
ID          = 1000
stateno     = 40011
pos         = 21,-106
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type        = Helper
trigger1    = AnimElem = 3
helpertype  = normal
name        = "ShunShunrikka"
ID          = 65
stateno     = 90640
pos         = 26,-82
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.1
size.yscale = 0.1

[State 0, Orihime]
type           = Width
trigger1       = 1
edge           = 14,0
player         = 14,0
ignorehitpause = 1


[State 0, TsubakiNoInochi]
type     = VarSet
trigger1 = Time = 0
v        = 50
value    = 0

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1000,14
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 2
value    = S250,0
volume   = 99
channel  = -1

[State 0, Orihime]
type     = PlaySnd
trigger1 = AnimElem = 4
value    = S1500,7
volume   = 256
channel  = 0

[State 0, Orihime]
type       = ChangeState
triggerall = command = "FF"
trigger1   = Time >= 27
value      = 100
ctrl       = 1

[State 0, Orihime]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 40011]
type            = A
movetype        = A
physics         = N
anim            = 40610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 1

[State Rotation]
Type           = AngleDraw
trigger1       = Vel X != 0
value          = -atan(vel Y/vel X)*57.2957795 + 180*(Vel X < 0)
[State Rotation]
Type           = AngleDraw
trigger1       = 1
scale          = 0.2,0.2

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 14
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40600
ID             = 40610
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.05,0.05
sprpriority    = 7
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = 90
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40620
ID             = 40620
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.06,0.06
sprpriority    = 8
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = 90
bindtime       = -1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = (!Time)
anim           = 40630
ID             = 40630
pos            = 0,0
postype        = p1
vel            = 0,0
facing         = 1
random         = 0,0
scale          = 0.12,0.12
sprpriority    = 6
ownpal         = 1
shadow         = 0,0,0
removeongethit = 1
removetime     = 90
bindtime       = -1
ignorehitpause = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NA,SA,HA,NT,ST,HT
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = HitOverride
trigger1         = 1
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno          = 3101
time             = 1
slot             = 0
ignorehitpause   = 1
[State 0, KotenZanshun]
type             = AssertSpecial
trigger1         = 1
flag             = NoShadow
ignorehitpause   = 1
[State 0, KotenZanshun]
type            = PlayerPush
trigger1        = 1
value           = 0
[State 0, KotenZanshun]
type            = ScreenBound
trigger1        = 1
value           = 0
movecamera      = 0,0
[State 0, KotenZanshun]
type     = VelSet
trigger1 = AnimElem = 1
x        = 9
y        = 1

[State 0, Orihime]
type     = PlaySnd
trigger1 = Time = 0
value    = S1000,12
volume   = 98
channel  = -1


[State 0, Shunshunrikka]
type           = Helper
trigger1       = Movehit = 1 
helpertype     = normal
name           = "HitSFX"
ID             = 14996
stateno        = 14996
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.3
size.yscale    = 0.3
ignorehitpause = 1
persistent     = 9

[State 0, Shunshunrikka]
type           = Helper
trigger1       = MoveGuarded = 1
helpertype     = normal
name           = "Mamoru"
ID             = 14200
stateno        = 14200
pos            = (Floor(p2bodydist X + 29)), 0
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.2
size.yscale    = 0.2
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



[State 0, Kogeki]
type                          = HitDef
trigger1                      = gametime%5 = 0
attr                          = S, NP, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 7, Hit
animtype                      = Light
ground.type                   = high
damage                        = 4,2
pausetime                     = 7,7
guard.pausetime               = 7,7
hitsound                      = S1100,0+random%4
guardsound                    = S320,0
ground.hittime                = 14
ground.slidetime              = 14
guard.slidetime               = 14
guard.hittime                 = 14
air.hittime                   = 14
ground.velocity               = -10
guard.velocity                = -10
air.velocity                  = -3,-1
airguard.velocity             = 0,0.5
ground.cornerpush.veloff      = 1
air.cornerpush.veloff         = 1
down.cornerpush.veloff        = 1
guard.cornerpush.veloff       = 1
airguard.cornerpush.veloff    = 1
down.velocity                 = 0,0
numhits                       = 1
persistent                    = 3
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-70
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,0,0))
envshake.freq                 = IfElse(enemynear,MoveType = A ,120,IfElse(enemynear,MoveType = H,0,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A ,-4,IfElse(enemynear,MoveType = H,0,0))


[State 0, Explod]
type           = Explod
trigger1       = time%6 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.3,0.3
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1

[State 0, Explod]
type           = Explod
trigger1       = time%14 = 0
anim           = 14992
ID             = 14992
pos            = 0,0
postype        = p1
vel            = -.5,.5
random         = 0,45
supermove      = 99999
pausemove      = 99999
scale          = 0.15,0.15
sprpriority    = 4
ontop          = 1
ownpal         = 1
ignorehitpause = 1


[State 0, Shunshunrikka]
type           = DestroySelf
trigger1       = time = 90
ignorehitpause = 1

;-----------------------------------

;-----------------------------------------------------------------------------------------

; cominezo proteccion del escudo

[Statedef 1600]
type        = S
movetype    = A
physics     = N
juggle      = 0
velset      = 0,0
ctrl        = 0
anim        = 1600
poweradd    = 0
sprpriority = 2

[State 0, Orihime]
type            = PalFX
trigger1        = (!Time)
time            = 1
add             = 0,0,0
mul             = 170,212,412
sinadd          = 0,0,0,1
invertall       = 0
color           = 256
PalAdd          = 0,0,0
PalMul          = .5,.5,.5
trans           = add1
ignorehitpause  = 1

[State 0, Orihime]
type        = Helper
trigger1    = Time = 0
helpertype  = normal
name        = "Santen Kesshun"
ID          = 1643
stateno     = 1610
pos         = 0,0
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = ,NT,ST,HT
ignorehitpause   = 1

[State 0, HitOverride]
type             = HitOverride
triggerall       = Time >= 3
trigger1         = Time <= 59
attr             = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot             = 0
stateno          = 1620
time             = 1

[State 0, Orihime]
type     = ChangeState
trigger1 = AnimTime = 0
value    = 0
ctrl     = 1


[Statedef 1620]
type        = S
movetype    = A
physics     = N
juggle      = 0
velset      = 7,0
ctrl        = 0
anim        = 1620
poweradd    = 0
sprpriority = 0

[State 0, VelAdd]
type     = VelAdd
trigger1 = Gametime%1 = 0
x        = 0.055
y        = 0

[State 0, Orihime]
type        = Helper
trigger1    = Time = 0
helpertype  = normal
name        = "Santen Kesshun"
ID          = 1643
stateno     = 1621
pos         = 0,0
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, Orihime]
type            = PlaySnd
Triggerall      = Random <= 425
trigger1        = Time = 0
value           = S1500, 6
channel         = 0
volume = 200

[State 0, Orihime]
type            = PlaySnd
Triggerall      = Random > 425
Triggerall      = Random <= 650
trigger1        = Time = 0
value           = S1500, 3
channel         = 0
volume = 200

[State 0, Orihime]
type            = PlaySnd
Triggerall      = Random > 650
Triggerall      = Random <= 875
trigger1        = Time = 0
value           = S1500, 4
channel         = 0
volume = 200

[State 0, Orihime]
type            = PlaySnd
Triggerall      = Random > 875
trigger1        = Time = 0
value           = S1500, 2
channel         = 0
volume = 200

[State 0, Orihime]
type            = PlaySnd
trigger1        = Time = 1
value           = S1000, 12
channel         = 1

[State 0, Shunshunrikka]
type           = Width
trigger1       = 1
edge           = 10,0
player         = 10,0
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, Orihime]
type     = ChangeState
trigger1 = Time = 45
value    = 1630

[Statedef 1630]
type        = S
movetype    = A
physics     = S
juggle      = 0
velset      = 7,0
ctrl        = 0
anim        = 1630
poweradd    = 0
sprpriority = 2

[State 0, Orihime]
type     = ChangeState
trigger1 = AnimTime = 0
value    = 0
ctrl     = 1

[Statedef 1610]
type            = A
movetype        = A
physics         = N
anim            = 1610
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 1
movehitpersist  = 1
hitcountpersist = 1
sprpriority     = 10

[State 0, Orihime]
type            = PlaySnd
trigger1        = Time = 0
value           = S1000, 23
channel         = 10

[State 0, Orihime]
type        = Helper
trigger1    = Time = 0
helpertype  = normal
name        = "Santen Kesshun"
ID          = 1643
stateno     = 1611
pos         = 0,0
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 90
ignorehitpause = 1
[State 0, BindToRoot]
type     = BindToRoot
trigger1 = 1
time     = 1
facing   = 1
pos      = 10,10

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1
[State -1]
Type     = DestroySelf
Trigger1 = AnimTime = 0 || Root,StateNo != 1600


[Statedef 1611]
type            = A
movetype        = A
physics         = N
anim            = 1611
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 1
movehitpersist  = 1
hitcountpersist = 1

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 95
ignorehitpause = 1

[State 0, BindToRoot]
type     = BindToRoot
trigger1 = 1
time     = 1
facing   = 1
pos      = 10,10

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State -1]
Type     = DestroySelf
Trigger1 = AnimTime = 0 || Root,StateNo != 1600


[Statedef 1621]
type            = A
movetype        = A
physics         = N
anim            = 1621
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 1
movehitpersist  = 1
hitcountpersist = 1

[State 0, Orihime]
type            = BGPalFX
trigger1        = MoveHit = 1 
time            = 14
add             = 0,0,0
mul             = 256,156,56
sinadd          = 0,0,0,1
invertall       = 0
color           = 256
PalAdd          = 0,0,0
PalMul          = .5,.5,.5
trans           = add1
ignorehitpause  = 1



[State 0, VarSet]
type       = VarSet
trigger1   = time = 0
v          = 20
value      = 0

[State 0, VarAdd]
type       = VarAdd
trigger1   = MoveContact = 1
v          = 20
value      = 1
persistent = 1


[State 0, ShunShunRikka]
type                          = HitDef
trigger1                      = var(20) < 1
attr                          = S, SP
hitflag                       = MAFDP
guardflag                     = MA
priority                      = 9,Hit
getpower                      = ceil((ceil(root,FVar(6))+root,Var(3))),ceil((ceil(root,FVar(6))+root,Var(3))/2)
givepower                     = ceil((ceil(root,FVar(6))+root,Var(3))/2),ceil((ceil(root,FVar(6))+root,Var(3))/4)
animtype                      = hard
ground.type                   = Low
air.type                      = Low
air.animtype                  = hard
fall.animtype                 = hard
damage                        = IfElse((root,p2dist X >= 0 && enemynear,facing = facing),ceil(root,FVar(6)*2.5),IfElse(enemynear,MoveType = A,ceil(root,FVar(6)*2.0),IfElse(enemynear,MoveType = H,ceil(root,FVar(6)*1.5),ceil(root,FVar(6))))),25
pausetime                     = 2,14
guard.pausetime               = 2,14
hitsound                      = S1000,10
guardsound                    = S320,0
ground.hittime                = 14
ground.slidetime              = 14
ground.slidetime              = 14
guard.slidetime               = 16
air.hittime                   = 14
ground.velocity               = -5,-5.5
guard.velocity                = -7
air.velocity                  = -5,-5.5
airguard.velocity             = -3.5,-0.1
ground.cornerpush.veloff      = 0
air.cornerpush.veloff         = 0
down.cornerpush.veloff        = 0
guard.cornerpush.veloff       = 0
airguard.cornerpush.veloff    = 0
fall                          = 1
down.hittime                  = 20
down.bounce                   = 0
numhits                       = 1
sparkno                       = -1
guard.sparkno                 = -1
sparkxy                       = -10,-65
envshake.time                 = IfElse(enemynear,MoveType = A ,12,IfElse(enemynear,MoveType = H,6,0));IfElse(enemynear,MoveType = A || enemynear,MoveType = H,12,0)
envshake.freq                 = IfElse(enemynear,MoveType = A,240,IfElse(enemynear,MoveType = H,120,0))
envshake.ampl                 = IfElse(enemynear,MoveType = A,-4,IfElse(enemynear,MoveType = H,-6,0))
p2stateno = 5600

[State -3, Explod]
type = Explod
trigger1 = MoveHit = 1 
anim = 7022
pos = -5,-65
postype = P2
sprpriority = 5
ownpal = 0
bindtime = 170


[State 0, Shunshunrikka]
type           = Helper
trigger1       = Movehit = 1 
helpertype     = normal
name           = "MoveInterrupt"
ID             = 14993
stateno        = 14993
pos            = (Floor(p2bodydist X + 59)), -75
postype        = p1
facing         = 1
keyctrl        = 0
ownpal         = 1
size.xscale    = 0.4
size.yscale    = 0.4
ignorehitpause = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
persistent     = 9



[State 0, Orihime]
type        = Helper
triggerall  = NumHelper(3) = 0
trigger1    = Time = 0
helpertype  = normal
name        = "Santen Kesshun"
ID          = 3
stateno     = 1622
pos         = 0,0
postype     = p1
facing      = 1
keyctrl     = 0
ownpal      = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 90
ignorehitpause = 1

[State 0, BindToRoot]
type     = BindToRoot
trigger1 = 1
time     = 1
facing   = 1
pos      = 10,10

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State 0, ChangeState]
type     = ChangeState
Trigger1 = Root,StateNo != 1620
value    = 1623

[Statedef 1623]
type            = A
movetype        = A
physics         = N
anim            = 1623
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 1
movehitpersist  = 1
hitcountpersist = 1
sprpriority     = 10

[State 0, Shunshunrikka]
type           = SprPriority
trigger1       = 1
value          = 95
ignorehitpause = 1

[State 0, BindToRoot]
type     = BindToRoot
trigger1 = 1
time     = 1
facing   = 1
pos      = 10,10

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State -1]
Type     = DestroySelf
Trigger1 = AnimTime = 0

[Statedef 1622]
type            = A
movetype        = A
physics         = N
anim            = 1622
velset          = 0,0
ctrl            = 0
poweradd        = 0
juggle          = 0
facep2          = 0
hitdefpersist   = 1
movehitpersist  = 1
hitcountpersist = 1
sprpriority     = 14

[State 0, BindToParent]
type     = BindToParent
trigger1 = 1
time     = 1
facing   = 1
pos      = 0,0

[State 0, Shunshunrikka]
type           = AssertSpecial
trigger1       = 1
flag           = NoShadow
ignorehitpause = 1

[State 0, Shunshunrikka]
type        = PlayerPush
trigger1    = 1
value       = 1

[State 0, Shunshunrikka]
type             = NotHitBy
trigger1         = 1
time             = 1
value            = SCA
ignorehitpause   = 1

[State -1]
Type     = DestroySelf
Trigger1 = Root,StateNo != 1620

;-----------------------------------------------------------------------


;golpe giratorio ( defensa al lebantarse )

[Statedef 950]
type = S
movetype = A
juggle = 0
anim = 950
ctrl = 0
poweradd = -30
velset = 0,0
sprpriority = 2

[State 1560, 1]
type             = turn
trigger1         = time = 0
trigger1         = p2dist x <= 0

[State 660 , vel]
type = VelSet
trigger1 = AnimElem = 2
x = 4

[State 12000, 1]
type = PlaySnd
trigger1 = Time = 0
value = 41, 0
volume = 256

[State 12000, 1]
type = PlaySnd
trigger1 = Time = 4
value = 250, 0

[State 1111, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
damage    = 60, 8
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = s7022
sparkxy = -8, -17
hitsound = S260,0
guardsound = S320, 0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2, -6
air.velocity = -3.3,-10
fall = 1
air.fall = 1
fall.recover =1

[State 1010, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------
