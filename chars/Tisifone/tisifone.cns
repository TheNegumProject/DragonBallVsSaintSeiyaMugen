;-------------------------------------
;-------------------------------------
;Tisifone Costant File By TonyADV
;-------------------------------------
;-------------------------------------

[Data]
life = 1000          
attack = 100         
defence = 100        
fall.defence_up = 50 
liedown.time = 40    
airjuggle = 15       
sparkno = 2        
guard.sparkno = 40 
KO.echo = 0          
volume = 255          

[Size]
xscale = 1           
yscale = 1           
ground.back = 18     
ground.front = 18    
air.back = 10        
air.front = 15       
z.width = 10         
height = 50	     
attack.width = 4,4   
attack.dist = 160    
proj.attack.dist = 90
proj.doscale = 0       
head.pos = -3,-98    
mid.pos = 0,-70     
shadowoffset = 2     

[Velocity]
walk.fwd  = 2.4
walk.back = -1.8
run.fwd  = 5.6, 7
run.back = -6.2,-3
jump.neu = 0,-11
jump.back = -3.1
jump.fwd = 2.5
runjump.back = -4.60,-8.2
runjump.fwd = 4.60,-8.2
airjump.neu = 0,-12
airjump.back = -3,-9
airjump.fwd = 5,12

[Movement]
airjump.num = 1
airjump.height = 35
yaccel = .55
stand.friction = .85
crouch.friction = .82


;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;Corse
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------

;corsa avanti
[Statedef 100]
type    = S
movetype = I
physics = N
anim = 100
ctrl = 0

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2500
pos = 0,30
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 25
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 100,1]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 1, 0

[State 100,2]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 1, 1

[State 100,3]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 1, 2

[State 100,4]
type = ChangeState
trigger1 = Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100,5]
type = ChangeState
trigger1 = Command = "holdupfwd" && Time >= 10
value = 40

[State 100,6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;------------------------
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2510
pos = 0,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 101,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
;scatto indietro
;------------------------
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 105,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2510
pos = 25,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 20
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 105,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105,VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .55

[State 105,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 3

[State 105,VelAdd]
type = VelSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
x = 0

[State 106,PosSet]
type = PosSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 105,End]
type = ChangeState
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 0
ctrl = 1

;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;SALTI E Cadute
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------

;Salti
[Statedef 40]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,2]
type = VarSet
trigger1 = Command = "holdfwd"
v = 27
value = 1

[State 40,3]
type = VarSet
trigger1 = Command = "holdback"
v = 27
value = -1

[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(26) = 0
trigger2 = PrevStateNo = 100 && Var(27) != 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x),Const(velocity.jump.fwd.x)))
y = Const(velocity.jump.y)

[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = Var(26) = 1
trigger2 = PrevStateNo = 100 && Var(27) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x),Const(velocity.runjump.fwd.x)))
y = Const(velocity.jump.y)

[State 40,A]
type = VelSet
triggerall = AnimTime = 0
trigger1 = Command != "holdup"
y = -6.5

[State 40,VarSet]
type = VarSet
triggerall = AnimTime = 0
trigger1 = Command != "holdup"
v = 25
value = 1

[State 40,9]
type = AfterImage
trigger1 = Var(26) = 1 || (PrevStateNo = 100 && Var(27) = 1)
trigger1 = Var(27) != 0
trigger1 = AnimTime = 0
time = 16
length = 20
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(26) = 1 || (PrevStateNo = 100 && Var(27) = 1)
trigger1 = Var(27) != 0
value = 7, 1

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(26) = 0 || (PrevStateNo = 100 && Var(27) != 1)
trigger2 = Var(26) = 1 || (PrevStateNo = 100 && Var(27) = 1)
trigger2 = Var(27) = 0
value = 7, 1

[State 4600,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------
;
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && Var(25) = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Var(25) = 1
value = IfElse(Vel X <= 0,51,52)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2 && Var(25) = 0
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2 && Var(25) = 1
persistent = 0
value = Anim + 2

;---------------------------------------------
;
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0, 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]),15, 20)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 25
type = ChangeState
value = 5110

;---------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
type = ChangeState
value = 5110

;---------------------------------------------
;
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200
velset = -4.0, 0
ctrl = 0

[State 5201,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,VelMul]
type = VelMul
trigger1 = Time >= 15
x = .95

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5201,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 2

[State 5201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;win - lose - etcc
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;lose
[Statedef 170]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 170,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 170,3]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

;---------------------------------------------
;WIN state decider
[Statedef 180]
type = S

[State 190, 1]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,99

[State 190, 3]
type = ChangeState
trigger1 = Var(2) = [0,49] 
value = 181

[State 190, 3]
type = ChangeState
trigger1 = Var(2) = [50,99] 
value = 182

;---------------------------------------------
;WIN 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0,0

[State 181,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 735000, ico win]
type = null;Explod
trigger1 = AnimElem = 1
anim = 900
pos = -310, 210
postype = right
sprpriority = 9
supermove = 2
removetime = -1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0

[State 180, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,2

[State 181,3]
type = AssertSpecial
trigger1 = Time = [0,120]
flag = RoundNotOver

;---------------------------------------------
;WIN 2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0,0

[State 182,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 735000, ico win]
type = null;Explod
trigger1 = AnimElem = 1
anim = 900
pos = -310, 210
postype = right
sprpriority = 9
supermove = 2
removetime = -1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3

[State 182,3]
type = AssertSpecial
trigger1 = Time = [0,120]
flag = RoundNotOver

;---------------------------------------------
;---------------------------------------------
;Intro state decider
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,99

[State 190, 2]
type = ChangeState
trigger1 = Var(2) = [0,99]
value = 191

;---------------------------------------------
;Intro1
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0,0

[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 1015, scia]
type = Explod
trigger1 = Animelem = 14
anim = 2510
pos = -2,17
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 191,2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 13

[State 191,2]
type = PlaySnd
trigger1 = AnimElem = 13
value = 4, 0

[State 191,2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 191,3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------
;Provocazione
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0, 0
ctrl = 0
poweradd= 500

[State 195,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,10

[State 195,CtrlSet]
type = CtrlSet
trigger1 = Time = 32
value = 1

[State 195,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;attaki base
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------

;Pugno debole - A
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 200
poweradd = 50

[State 200,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
damage    = 25
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2030
guard.sparkno = S2050
sparkxy = -10,-88
hitsound = S3, 0
guardsound = S6,2
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6
yaccel = .5

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Pugno medio - B
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0,0
anim = 210

[State 210,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 210,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 35
guardflag = M
hitflag = MAF
pausetime = 10,10
sparkno = S2010
guard.sparkno = S2060
sparkxy = -15,-75
hitsound = S3, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -3.5,-6
yaccel = .5

[State 210,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Pugno medio - B - vicino
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0,0
anim = 220

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 9
movetype = I

[State 220,hitdef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 40
guardflag = M
hitflag = MAF
pausetime = 12,8
sparkno = S2010
guard.sparkno = S2060
sparkxy = 0,-75
hitsound = S3, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9
air.velocity = -3.5,-6
yaccel = .5

[State 220,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Pugno fortissimo - C
[Statedef 500]
type = S
movetype = A
physics = S
juggle = 8
poweradd= 50
anim = 500
ctrl = 0
velset = 0,0

[State 500,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 9

[State 500,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 500,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 45
guardflag = M
hitflag = MAF
pausetime = 14,12
sparkno = S2020
guard.sparkno = S2060
sparkxy = -10,-85
hitsound = S3,5
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4.5,-7
air.velocity = -4,-7
yaccel = .45
fall = 1
fall.recover = 0

[State 510,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Calcio Debole - X
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0,0
anim = 230

[State 230,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 230,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    = 25
guardflag = M
hitflag = MAF
pausetime = 10,10
sparkno = S2030
guard.sparkno = S2050
sparkxy = -10,-30
hitsound = S3, 1
guardsound = S6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -4
air.velocity = -3.5,-6
yaccel = .5

[State 230,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;calcio medio - Y
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0,0
anim = 250

[State 250,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 250,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 35
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = 10,-80
hitsound = S3, 3
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9.5
air.velocity = -3.5,-6
yaccel = .5

[State 250,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;calcio medio - z
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
ctrl = 0
velset = 0,0,0
anim = 240

[State 432, 0]
type = VelSet
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
x = 3

[State 240,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 240,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 45
guardflag = M
hitflag = MAF
pausetime = 12,10
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-30
hitsound = S3, 3
guardsound = S6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9.5
air.velocity = -3.5,-6
yaccel = .5

[State 230,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Pugno Basso A
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 50
ctrl = 0
anim = 400
velset = 0,0

[State 400,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 400,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Light
damage    = 35
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = S2030
guard.sparkno = S2050
sparkxy = 0,-40
hitsound = S3, 0
guardsound = S6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6
yaccel = .5

[State 400,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------
;Pugno Basso B
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 50
ctrl = 0
anim = 410
velset = 0,0

[State 410,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 410,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Hard
damage    = 45
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = 0,-45
hitsound = S3, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.velocity = -9.5
ground.velocity = -1.5, -11
ground.cornerpush.veloff = 0
air.velocity = -2.0,-6
yaccel = .5
air.fall = 1
fall = 1
fall.recover = 0

[State 410,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------
;Calcio Basso X
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 50
ctrl = 0
anim = 430
velset = 0, 0

[State 430,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 430,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype = Light
damage    = 35
hitflag = MA
guardflag = L
pausetime = 10,8
sparkno = S2030
guard.sparkno = S2050
sparkxy = -10,-5
hitsound = S3, 1
guardsound = S6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6
yaccel = .5

[State 430,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------
;Calcio Basso Y
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 50
ctrl = 0
anim = 440

[State 432, 0]
type = VelSet
trigger1 = AnimElem = 3
x = 7

[State 1015, scia]
type = Explod
trigger1 = Animelem = 2
anim = 2510
pos = -10,15
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 440,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 440, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 45
animtype = Hard
hitflag = MA
guardflag = L
pausetime = 12,12
sparkno = S2020
guard.sparkno = S2060
sparkxy = 20,0
hitsound = S3, 3
guardsound = S6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3,-5
air.velocity = -3,-6.5
guard.velocity = -5
down.velocity = -3.5,-2
fall = 1
yaccel = .55

[State 440,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------
;Pugno in salto A
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 50
ctrl = 0
anim = 600

[State 600,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
damage    = 25
guardflag = HA
priority = 3
pausetime = 12,10
sparkno = S2030
guard.sparkno = S2050
sparkxy = 0,-60
hitsound = S3, 0
guardsound = S6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5.0
ground.cornerpush.veloff = -8.0
air.velocity = -3.5,-6
yaccel = .5

;---------------------------------------------
;Pugno in salto B
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 50
ctrl = 0
anim = 610

[State 610,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 610,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = light
damage    = 35
guardflag = HA
priority = 3
pausetime = 12,10
sparkno = S2010
guard.sparkno = S2060
sparkxy = 0,-25
hitsound = S3, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
air.cornerpush.veloff = -8.0
air.velocity = -3.5,-6
yaccel = .5

;---------------------------------------------
;Gomitata Aerea C
[Statedef 720]
type    = A
movetype= A
physics = A
juggle  = 7
poweradd= 50
ctrl = 0
anim = 720

[State 720,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = 45
guardflag = HA
priority = 3
pausetime = 12,10
sparkno = S2020
guard.sparkno = S2060
sparkxy = 15,-25
hitsound = S3, 3
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7.0
ground.cornerpush.veloff = -8.0
air.velocity = -3.5,-6
yaccel = .5

;---------------------------------------------
;Calcio in salto X 
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 50
ctrl = 0
anim = 630

[State 630,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 630,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
damage    = 25
guardflag = HA
priority = 3
pausetime = 12,10
sparkno = S2030
guard.sparkno = S2050
sparkxy = 0,-40
hitsound = S3, 1
guardsound = S6,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5
ground.cornerpush.veloff = -8.0
air.velocity = -3.5,-6
yaccel = .5


;---------------------------------------------
;Calcio in salto y
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 50
ctrl = 0
anim = 640

[State 640,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 640,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = 35
guardflag = HA
priority = 3
pausetime = 12,10
sparkno = S2010
guard.sparkno = S2060
sparkxy = 0,-10
hitsound = S3, 3
guardsound = S6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
ground.cornerpush.veloff = -8.0
air.velocity = -3.5,-6
yaccel = .5

;---------------------------------------------
;Calcio in salto Z
[Statedef 510]
type    = A
movetype= A
physics = A
juggle  = 8
anim = 510
poweradd = 50
ctrl = 0

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 9

[State 510,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 510,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Hard
damage    = 45
guardflag = M
hitflag = MAF
pausetime = 14,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-50
hitsound = S3,5
guardsound = S6,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4.5,-6
guard.velocity = -6
air.velocity = -4,-6
air.fall = 1
fall = 1
recover = 0

;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;prese
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------

;Presa 1
[Statedef 800]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800
velset = 0, 0
juggle  = 7

[State 800,HitDef]
type = Hitdef
trigger1 = Time = 0
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
hitsound = -1
fall = 1
fall.recover = 0

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 220

;
[Statedef 810]
type = S
movetype = A
physics = S
anim = 810
velset = 0, 0
poweradd = 50
sprpriority = -1

[State 810,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 2100
pos = 35,-70
postype = P1
sprpriority = 1
bindtime = 1
ownpal = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 8 || AnimElem = 14
anim = 2020
pos = 50,-80
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 26
anim = 2020
pos = 55,-95
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 810,SprPriority]
type = SprPriority
trigger1 = AnimElem = 4
value = 2

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem >= 1
pos = enemynear,const(Size.ground.back)+20, 0

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 27
pos = enemynear,const(Size.ground.back)+20, -10

[State 810,TargetBind]
type = TargetState
trigger1 = AnimElem = 27 ,= 9
value = 830

[State 810,Width]
type = Width
trigger1 = AnimElem = 1 && FrontEdgeDist < 45
edge = 45,20

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 27
value = -24

[State 810,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;
[Statedef 820]
type = A
movetype = H
physics = N
ctrl = 0

[State 820,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 820,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

; 
[Statedef 830]
type = A
movetype = H
physics = N
anim = 5030
velset = -4,-6
ctrl = 0

[State 830,ChangeAnim]
type = ChangeAnim
trigger1 = SelfAnimExist(5035)
trigger1 = Anim = 5030 && AnimTime = 0
value = 5035

[State 830,ChangeAnim]
type = ChangeAnim
triggerall = AnimTime = 0
trigger1 = anim = 5030 && !SelfAnimExist(5035)
trigger2 = anim = 5035
value = 5050

[State 830,veladd]
type = veladd
trigger1 = 1
y = .45

[State 830,SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100


;---------------------------------------------
;Presa 2
[Statedef 850]
type = S
movetype = A
physics = S
ctrl = 0
anim = 850
velset = 0, 0

[State 850,Hitdef]
type = Hitdef
trigger1 = Time = 0
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 860
p2stateno = 870
p2getp1state = 1
hitsound = -1
fall = 1
fall.recover = 0

[State 850,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 220

;
[Statedef 860]
type = S
movetype = A
physics = S
anim = 860
velset = 0, 0
poweradd = 50
sprpriority = 2

[State 860,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 10

[State 860,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 13

[State 860,SprPriority]
type = SprPriority
trigger1 = AnimElem = 4
value = -1

[State 860,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 860,PosFreeze]
type = Posadd
trigger1 = AnimElem = 4
x = enemynear,const(Size.ground.back)+enemynear,const(Size.ground.front)+40

[State 860,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 860,TargetBind]
type = TargetBind
trigger1 = AnimTime = 0
pos = enemynear,const(Size.ground.back)+20, 0

[State 860,TargetBind]
type = TargetState
trigger1 = AnimTime = 0
value = 820

[State 860,Width]
type = Width
trigger1 = AnimElem = 1 && FrontEdgeDist < 45
edge = 45,20

[State 860,Turn]
type = Turn
trigger1 = AnimTime = 0

[State 860,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 810
ctrl = 0

;
[Statedef 870]
type = A
movetype = H
physics = N
ctrl = 0

[State 870,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 870,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 870,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 870

[State 870,Turn]
type = Turn
trigger1 = AnimTime = 0

;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;scivolate & scatti
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------

;Scivolata - avanti
[Statedef 4050]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4000
velset = 0, 0

[State 4050,0]
type = NotHitBy
trigger1 = AnimElem = 7, < 0
value = SCA

[State 4050,1]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 4050,2]
type = PlayerPush
trigger1 = 1
value = 0

[State 4050,3]
type = VelSet
trigger1 = AnimElem = 2
x = 5.50

[State 4050,4]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4050,5]
type = PlaySnd
trigger1 = Time = 1
value = 1, 13

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 14
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 4050,7]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;Scivolata - indietro
[Statedef 4150]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4100
velset = 0, 0

[State 4150,0]
type = NotHitBy
trigger1 = AnimElem = 9, < 0
value = SCA

[State 4150,1]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 4150,2]
type = PlayerPush
trigger1 = 1
value = 0

[State 4150,3]
type = VelSet
trigger1 = AnimElem = 3
x = -5.00

[State 4150,4]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4150,5]
type = PlaySnd
trigger1 = Time = 1
value = 1, 13

[State 4600,6]
type = AfterImage
trigger1 = Time = 0
time = 14
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 4150,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 10
ctrl = 1

;--------------------------------------------
;scatto1
[Statedef 1060]
type     = S
movetype = A
physics  = S
poweradd = IfElse(Var(15)=1,66,8)
velset   = 0
ctrl = 0
anim = 1200
juggle = 5

[State 1060,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 1, 0

[State 1060,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 1, 1

[State 1060,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 1, 2

[State 1060,VarSet]
type = VarSet
trigger1 = Time = 0
var(10) = 0

[State 1060,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2500
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 4
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1060,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2510
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 3
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1060,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2520
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 2
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1060, VelSet]
type = VelSet
trigger1 = AnimElem = 2, >= 0
x = const(velocity.run.fwd.x)

[State 1060,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && P2BodyDist X <= 10
value = ifelse(var(10) = 0,1061,1062)

[State 1060, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1201
ctrl = 0

;------------------------
[Statedef 1061]
type     = S
movetype = A
physics  = S
velset   = 0,0
ctrl = 0
anim = 1202

[State 1061,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 10

[State 1061,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 0, 13

[State 1061,PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = enemynear,const(Size.ground.back)+enemynear,const(Size.ground.front)+60

[State 1061,VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 3

[State 1061,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 1061,turn]
type = turn
trigger1 = (enemy,facing = 1 && facing = 1) || (enemy,facing = -1 && facing = -1)
trigger1 = AnimTime = 0

[State 1061,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 1062]
type     = S
movetype = A
physics  = S
velset   = 0
ctrl = 0
anim = 1062

[State 1062,PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = enemynear,const(Size.ground.back)+enemynear,const(Size.ground.front)+60

[State 1062,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 3

[State 1062,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 10

[State 1062,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,=1
value = 0, 13

[State 1062,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 80,10
getpower = IfElse(Var(15)=1,112,14),IfElse(Var(15)=1,14,2)
guardflag = M
hitflag = MAF
pausetime = 13,13
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-40
hitsound = S3,5
guardsound = S4,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0
air.velocity = -3.5,-6
yaccel = .5

[State 1062,turn]
type = turn
trigger1 = AnimTime = 0

[State 1062,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0 && (var(10) = 1 || var(10) = 2 || var(10) = 3)
value = IfElse(var(10) = 1,1100,IfElse(var(10) = 2,1110,1120))
ctrl = 0

[State 1062,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0  && (var(10) = 4 || var(10) = 5 || var(10) = 6) 
value = IfElse(var(10) = 4,1130,IfElse(var(10) = 5,1140,1150))
ctrl = 0

;-----------------------------------------------
;scatto2
[Statedef 1070]
type     = S
movetype = I
physics  = S
poweradd = IfElse(Var(15)=1,66,8)
velset   = 0
ctrl = 0
anim = 1200
juggle = 5

[State 1070,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 1, 0

[State 1070,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 1, 1

[State 1070,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 1, 2

[State 1070,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2500
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 4
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1070,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2510
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 3
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1070,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2520
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 2
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1070,VelSet]
type = VelSet
trigger1 = AnimElem = 2, >= 0
x = const(velocity.run.fwd.x)

[State 1070,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && (var(10) = 1 || var(10) = 2 || var(10) = 3)
value = IfElse(var(10) = 1,1100,IfElse(var(10) = 2,1110,1120))
ctrl = 0

[State 1070,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && (var(10) = 4 || var(10) = 5 || var(10) = 6) 
value = IfElse(var(10) = 4,1130,IfElse(var(10) = 5,1140,1150))
ctrl = 0

[State 1070,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && P2BodyDist X <= 10 && var(10) = 0
value = 1061

[State 1070,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1201
ctrl = 0

;------------------------
[Statedef 1201]
type     = S
movetype = I
physics  = S
velset   = 0,0
ctrl = 0
anim = 1201

[State 1201,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;---------------------------------------------
;---------------------------------------------
;special moves
;---------------------------------------------
;---------------------------------------------
;---------------------------------------------

;Iper Pugno
[Statedef 4500]
type = S
movetype = A
physics = S
ctrl = 0
anim = 500
velset = 0, 0
poweradd = -200

[State 4500,0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 9

[State 4500,1]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 2
anim = S2300
pos = 0,-65

[State 1015, scia]
type = Explod
trigger1 = Animelem = 2
anim = 2600
pos = 8,0
postype = p1
sprpriority = -2
ownpal = 1
ignorehitpause = 0

[State 4500,2]
type = NotHitBy
trigger1 = AnimElem = 7, < 0
value = SCA

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 29
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 4500,4]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 1010,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 4500,5]
type = Hitdef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 85
getpower = 0
givepower = 45
guardflag = M
hitflag = MAF
pausetime = 12,14
sparkno = S2000
guard.sparkno = S2060
sparkxy = -10,-80
hitsound = S6, 3
guardsound = S6,1
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4.2,-3.5
fall = 1
fall.recover = 0
air.recover = 0
recover = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 4500,6]
type = PosAdd
trigger1 = AnimElem = 5 || AnimElem = 6
x = 12

[State 4500,7]
type = PosAdd
trigger1 = AnimElem = 9 || AnimElem = 10
x = -12

[State 4500,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;mega pugno1
[Statedef 1020]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 1020
poweradd = 150
juggle = 5

[State 1020,VarSet]
type = VarSet
trigger1 = Time = 0
var(10) = 0

[State 1020,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,9

[State 1020,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
value = 1,12

[State 1020,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 2600
pos = 2, 0
sprpriority = -2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 1020,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 12
movetype = I

[State 1020,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 70
guardflag = M
hitflag = MAF
pausetime = 10,10
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-85
hitsound = S3,5
guardsound = S6,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
guard.velocity = -10
ground.velocity = -4.5,-6
air.velocity = -4,-6
yaccel = .45
air.fall = 1
fall = 1
fall.recover = 0


[State 1020,EnvShake]
type = EnvShake
trigger1 = AnimElem = 8
time = 9


[State 1020,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && (var(10) = 1 || var(10) = 2 || var(10) = 3)
value = IfElse(var(10) = 1,1100,IfElse(var(10) = 2,1110,1120))
ctrl = 0

[State 1020,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && (var(10) = 4 || var(10) = 5 || var(10) = 6) 
value = IfElse(var(10) = 4,1130,IfElse(var(10) = 5,1140,1150))
ctrl = 0

[State 1020,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;mega pugno2
[Statedef 1030]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 1030
poweradd = 150
juggle = 5

[State 1030,VarSet]
type = VarSet
trigger1 = Time = 0
var(10) = 0

[State 1030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,9

[State 1030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
value = 1,12

[State 1030,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 2600
pos = 2, 0
sprpriority = -2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 1030,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 17
movetype = I

[State 1030,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 80
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-85
hitsound = S3,5
guardsound = S6,2
guard.slidetime = 0
guard.hittime  = 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0
air.velocity = -3.5,-6
yaccel = .5
air.fall = 1
fall.recover = 0

[State 1030,ChangeState]
type = TargetState
trigger1 = moveguarded
value = 1040

[State 1030,EnvShake]
type = EnvShake
trigger1 = AnimElem = 8
time = 9

[State 1030, Envcolor]
type = Envcolor
trigger1 = moveguarded || movehit
value = 255, 255, 255
persistent = 0
ignorehitpause = 1
time = 1
under = 1

[State 1030,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && (var(10) = 1 || var(10) = 2 || var(10) = 3)
value = IfElse(var(10) = 1,1100,IfElse(var(10) = 2,1110,1120))
ctrl = 0

[State 1030,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, >= 0 && (var(10) = 4 || var(10) = 5 || var(10) = 6) 
value = IfElse(var(10) = 4,1130,IfElse(var(10) = 5,1140,1150))
ctrl = 0

[State 1030,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 
[Statedef 1040]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 1040,SelfState]
type = SelfState
trigger1 = Time > 20 && (anim = 5911 || anim = 1040)
trigger2 = AnimTime = 0 && anim = 5360
value = 0
ctrl = 1

;---------------------------------------------

;Uppercut
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 1210
poweradd = 150

[State 1210,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 27

[State 1210, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1210, Posadd]
type = Posadd
trigger1 = AnimElem = 3
x = 2

[State 1210, Posadd]
type = Posadd
trigger1 = AnimElem = 4
x = 8

[State 1210, Posadd]
type = Posadd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = AnimElem = 10
x = 12

[State 1210,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 35
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1210,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 75
guardflag = M
hitflag = MAF
pausetime = 27,29
sparkno = S2020
guard.sparkno = S2070
sparkxy = -5,-95
hitsound = S3,5
guardsound = S6,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1.5,-10
air.velocity = -2,-9.5
guard.velocity = -9.0
envshake.time = 18
envshake.freq = 60
envshake.ampl = -4
yaccel = .5
air.fall = 1
fall = 1
fall.recover = 0

[State 1210,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------

;mega pugno rotante
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 1220
poweradd = 150

[State 1015, scia]
type = Explod
trigger1 = Animelem = 5
anim = 60
pos = 5,5
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 35
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1220,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0, 27

[State 1220, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1220, Posadd]
type = Posadd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
x = 13

[State 1220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 1220,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = DiagUp
damage    = 75
hitflag = MAF
pausetime = 44,46
sparkno = S2000
guard.sparkno = S2070
sparkxy = 10,-75
hitsound = S3,5
guardsound = S6,2
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7,-9
air.velocity = -7,-9
yaccel = .45
air.fall = 1
fall = 1
fall.recover = 0

[State 1220,EnvShake]
type = EnvShake
trigger1 = movehit
time = 20
ignorehitpause = 1
persistent = 0

[State 1220, Envcolor]
type = Envcolor
trigger1 = movehit
value = 255, 255, 255
persistent = 0
ignorehitpause = 1
time = 2

[State 1220,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;presa + uppercut
[Statedef 1000]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1000
velset = 0, 0
poweradd = 150
juggle = 5

[State 1015, scia]
type = Explod
trigger1 = Animelem = 2
anim = 2500
pos = 25,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,14

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1,10

[State 1000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000,PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 4 ,>0
value = 0

[State 1000,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, ST
guardflag = M
hitflag = MAF
pausetime = 1,0
sparkno = S2030
guard.sparkno = S2070
sparkxy = 0,-60
hitsound =  S1,11
guardsound = S4,1
p1stateno = 1003
p2stateno = 1005
ground.type = Low
guard.slidetime = 12
guard.hittime  = 16
guard.ctrltime = 18
guard.velocity = -13.0
air.velocity = -3.5,-6
air.cornerpush.veloff = 0
yaccel = .5

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0 || moveguarded
value = IfElse(moveguarded = 1,1002,1001)
ctrl = 0

;------------------------
[Statedef 1001]
type     = S
movetype = I
physics  = S
velset   = 0
ctrl = 0
anim = 1001

[State 1001,VelSet]
type = VelSet
trigger1 = time = 1
x = 7

[State 1001,PosAdd]
type = PosAdd
trigger1 = time = 0
x = 174

[State 1001,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 1002]
type     = S
movetype = I
physics  = S
velset   = 0
ctrl = 0
anim = 1001

[State 1002,VelSet]
type = VelSet
trigger1 = time = 1
x = 7

[State 1002,PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2bodydist X - 10

[State 1002,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------
;
[Statedef 1003]
type = S
movetype = A
physics = S
anim = 1003
velset = 0, 0
poweradd = IfElse(Var(15)=1,128,16)
sprpriority = 2

[State 1003,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,2

[State 1003,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2150
pos = 0, -15
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 1003,Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 2020
pos = 20,-65
postype = P1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 1003,PosAdd]
type = PosAdd
trigger1 = time = 0
x = p2bodydist X + 10

[State 1003,SprPriority]
type = SprPriority
trigger1 = AnimElem = 3
value = -1

[State 1003,SprPriority]
type = SprPriority
trigger1 = AnimElem = 6
value = 2

[State 1003,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1003,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1004
pos = 0, 0
postype = P1
sprpriority = -1
bindtime = -1
removetime = -2
ownpal = 1

[State 1003,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 1003,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 1003,TargetBind]
type = TargetBind
trigger1 = AnimElem >= 1
pos = 12, 0

[State 1003,TargetBind]
type = TargetBind
trigger1 = AnimElem = 6
pos = 20, -12

[State 1003,TargetBind]
type = TargetState
trigger1 = AnimElem = 6 ,=1
value = 1006

[State 1003,Width]
type = Width
trigger1 = AnimElem = 1 && FrontEdgeDist < 45
edge = 45,20

[State 1003,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -48

[State 1003,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------
[Statedef 1005]
type = A
movetype = H
physics = N
ctrl = 0

[State 1005,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 1005,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1005

;------------------------ 
[Statedef 1006]
type = A
movetype = H
physics = N
anim = IfElse(SelfAnimExist(5052),5052,5030)
velset = -3.5,-6
ctrl = 0

[State 1006,ChangeAnim]
type = ChangeAnim
triggerall = Time >= 15
trigger1 = anim != 5050
value = 5050

[State 1006,veladd]
type = veladd
trigger1 = 1
y = .45

[State 1006,SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;-----------------------------
; [Statedef 1015]
type = A
movetype = H
physics = N
ctrl = 0

[State 1015,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 1015,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1015

;------------------------ 
[Statedef 1016]
type = A
movetype = H
physics = N
anim = ifelse(SelfAnimExist(5062),5062,5050)
velset = -1,-9.5
ctrl = 0

[State 1016,veladd]
type = veladd
trigger1 = 1
y = .45

[State 1016,SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100



;---------------------------------------------
;---------------------------------------------
;combo
;---------------------------------------------
;---------------------------------------------

;combo 1
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 1100
poweradd = 150

[State 1100,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,9

[State 1100, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1100,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 75
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2070
sparkxy = 0,-80
hitsound = S3,5
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -9
air.velocity = -3.5,-6.5
yaccel = .45
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 18
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1100,VarSet]
type = Varadd
trigger1 = Time = 0
var(11) = 1
ignorehitpause = 1

[State 1100,VarSet]
type = VarSet
trigger1 = Time = 0
var(10) = 0
ignorehitpause = 1


[State 1100,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1110
ctrl = 1

;------------------------ 
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 1110
poweradd = 0

[State 1110, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1110,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1100,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1111

;------------------------ 
;
[Statedef 1111]
type    = A
movetype= A
physics = N
velset = 3.3,-8
ctrl = 0
anim = 1111

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2500
pos = 10,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 1111,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,= 2
value = 0,23

[State 1111,NotHitBy]
type = NotHitBy
trigger1 = Time <= 10 
value = SCA

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 25
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1111,VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 1111,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 1111,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 75
guardflag = M
hitflag = MAF
pausetime = 8,12
sparkno = S2000
guard.sparkno = S2070
sparkxy = -10,-25
guardsound = S6,2
guardsound = S4,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9
air.velocity = -3.5,-6
yaccel = .45
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 1111,VarSet]
type = Varadd
trigger1 = Time = 0
var(11) = 1
ignorehitpause = 1

[State 1111,VarSet]
type = VarSet
trigger1 = Time = 0
var(10) = 0
ignorehitpause = 1

[State 1112,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1112
ctrl = 1

;------------------------
[Statedef 1112]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 1112

[State 1112,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1112,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------

;combo2
[Statedef 1151]
type    = A
movetype= A
physics = N
velset = 5.6,-4.2
ctrl = 0
anim = 1151
poweradd = 150

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 30
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2500
pos = 10,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 1151, VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 1151,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1152
ctrl = 0

;------------------------
[Statedef 1152]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1152

[State 1152,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,23

[State 1152, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1152,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 1152,HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype = Hard
damage    = 75
hitflag = MAFD
guardflag = L
pausetime = 12
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-25
hitsound = S3,5
guardsound = S6,1
ground.type = Low
yaccel = .45
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = -3.5,-6
down.velocity = 0, 0
guard.velocity = 0
air.fall = 1
fall.recover = 0
forcestand = 1

[State 1015, scia]
type = Explod
trigger1 = Animelem = 3
anim = 2510
pos = 10,14
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 1152,HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype = Hard
damage    = 75
hitflag = MAFD
guardflag = L
pausetime = 12
sparkno = S2030
guard.sparkno = S2070
sparkxy = 0,-25
hitsound = S3,5
guardsound = S6,2
ground.type = Low
yaccel = .45
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = -3.5,-6
down.velocity = 0, 0
guard.velocity = 0
air.fall = 1
fall.recover = 0
forcestand = 1
p2stateno = 1153
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 1152,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 1153]
type     = S
movetype = I
physics  = N
velset   = 0, 0
ctrl = 0

[State 1153,PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 1153,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1153

[State 1153,SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------
;combo 3
[Statedef 1202]
type     = S
movetype = A
physics  = S
velset   = 0,0
ctrl = 0
anim = 1202
poweradd = 150

[State 1200,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2500
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 4
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1200,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2510
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 3
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1200,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2520
pos = -32, 0
postype = p1
bindtime = 1
sprpriority = 2
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1202,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 14

[State 1202,pos]
type = posset
trigger1 = time = 0
y = 0

[State 1202,PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = enemynear,const(Size.ground.back)+enemynear,const(Size.ground.front)+60

[State 1202,VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 3

[State 1202,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 1202,HitDef]
type = HitDef
trigger1 = Time = 0
;trigger1 = P2StateType != A
;trigger1 = P2StateNo != [150,155]
attr = S, ST
givepower = 50
hitflag = M-
guard.dist = 0
priority = 2, Miss
sparkno = -1
p2facing = 1
p1stateno = 1203
p2stateno = 1205
p1facing =-1

[State 1202, turn]
type = turn
trigger1 = (enemy,facing = 1 && facing = 1) || (enemy,facing = -1 && facing = -1)  
trigger1 = AnimTime = 0

[State 1202,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 1203]
type     = S
movetype = I
physics  = N
velset   = 0
ctrl = 0
anim = 1203

[State 1203,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 11

[State 1203,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 4

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 30
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1203,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 2150
pos = 5,-90
postype = P1
sprpriority = -1
bindtime = 1
ownpal = 1

[State 1203,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 2400
pos = 5,-96
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1
facing = -1

[State 1203,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1203,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 1203,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 1203,BindtoTarget]
type = BindtoTarget
trigger1 = AnimElem = 1
pos = 0,0

[State 1203,PosAdd]
type = PosAdd
trigger1 = Time = 1
x = 15

[State 1203,SprPriority]
type = SprPriority
trigger1 = AnimElem = 3
value = -1

[State 1203,PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
x = 8

[State 1203,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -85

[state 1200, white fadeout]
type = BGPalFx
trigger1 = p2life = 0
add = 255,255,255
sinadd = 300,300,300,60
time= 40
ignorehitpause = 1
persistent= 0

[State 1203, 0]
type = turn
trigger1 = AnimTime = 0

[State 1203, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 1205]
type     = S
movetype = H
physics  = N
ctrl = 0
sprpriority = 1

[State 1205, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1205

[State 1205, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1206

;---------------------------
; 
[Statedef 1206]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1206,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 1206,ChangeAnim]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1206,ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 1207

;------------------------ 
[Statedef 1207]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1207, Envshake]
type = envshake
Trigger1 = time = 0
time = 9
ampl = -3
freq = 110

[State 1207, posadd]
type = posadd
trigger1 = Time = 0
x = -20

[State 1207,muteki]
type = nothitby
trigger1 = Time >= 0
value = SCA
time = 1

[State 1207, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1207, Var]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 1207,ChangeAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = SelfAnimExist(5102)
value = 5102

[State 1207,ChangeAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = SelfAnimExist(5101)
trigger1 = !SelfAnimExist(5102)
value = 5101

[State 1207,ChangeAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5101)
trigger1 = !SelfAnimExist(5102)
value = 5100

[State 1207,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1207,VelMul]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 1207,GameMakeAnim]
type = GameMakeAnim
trigger1 = Time = 1
value = 61
pos = 0, 0
under = sysvar(1) <= 10

[State 1207,HitFallDamage]
type = HitFallDamage
trigger1 = Time = 3

[State 1207,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 1207,selfState]
type = selfState
trigger1 = AnimTime = 0
value = 5101


;--------------------------------------------
;--------------------------------------------
; ricarica 
[Statedef 730000]
type = S
movetype = I
physics = S
anim = 730000
velset = 0
ctrl = 0

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 15
length = 20
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 730000, 1]
type = ChangeState
trigger1 = AnimTime= 0
value =735000

; Charge
[Statedef 735000]
type = S
movetype = I
physics = S
anim = 735000

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 13

[State 735000, 1]
type = ChangeState
trigger1 = command != "charge"
trigger2 = command != "charge 1"
value =740000

[State 735000, cosmo]
type = Explod
trigger1 = AnimElem = 1
pos = 0,0
anim = 2600000
sprpriority = -1
;removetime = 250

[State 735000, POLVERE]
type = Explod
trigger1 = AnimElem = 1
pos = 28,0
anim = 2600
sprpriority = -3

[State 735000, POLVERE]
type = Explod
trigger1 = AnimElem = 1
pos = 30,5
anim = 2250
sprpriority = -2

[State 735000, 2]
type = PowerAdd
trigger1 = Time= [0,12]
value = 18

[State 735000, 2]
type = ChangeState
trigger1 = Power >= 3000
value =741000

[State 735000, 3]
type = ChangeState
trigger1 = AnimTime= 0
value =735000

; Charge (Fim)
[Statedef 740000]
type = S
movetype = I
physics = S
anim = 740000

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 10
length = 20
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 740000, 1]
type = ChangeState
trigger1 = AnimTime= 0
value =0
ctrl = 1

; Charge Parte1
[Statedef 741000]
type = S
movetype = I
physics = S
anim = 740000

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 15
length = 20
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 741, 1]
type = PlaySnd
trigger1 = Time= 1
value = 1,13

[State 741, 2]
type = ChangeState
trigger1 = AnimTime= 0
value =0
ctrl = 1

;--------------------------------------------
;--------------------------------------------

;---------------------------------------------
;---------------------------------------------
;Super Moves
;---------------------------------------------
;---------------------------------------------

;---------------------------------------
;Super 1 - artigli del cobra 1
;---------------------------------------

[Statedef 3000]
type = S
movetype = A
physics = S
anim = 3000
velset = 0, 0
ctrl = 0
juggle = 5
poweradd= -1000

[State 3000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 7

[State 3000,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000,EnvColor]
type = EnvColor
trigger1 = Time = 2
value = 248,248,248
time = 2
under = 1

[State 3000,EnvColor]
type = EnvColor
trigger1 = Time = 4
value = 0, 0, 0
time = 24
under = 1

[State 3000,AssertSpecial]
type = AssertSpecial
trigger1 = Time = [2,28]
flag = NoFG

[State 735000, cosmo]
type = Explod
triggerall = NumExplod(2) = 0
trigger1 = AnimElem = 3
pos = 15,0
anim = 2
sprpriority = -1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 40

[State 3000,SuperPause]
type = SuperPause
trigger1 = Time = 1
time = 55
movetime = 35
anim = s2200
pos = 54, -78 
sound = S1,7
darken = 1

[State 735000, polvere]
type = Explod
triggerall = NumExplod(2600) = 0
trigger1 = AnimElem = 2
pos = 15,0
anim = 2600
ID = 2600
sprpriority = -5
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 735000, luce]
type = Explod
triggerall = NumExplod(2250) = 0
trigger1 = AnimElem = 2
pos = 15,0
anim = 2250
ID = 2250
sprpriority = -3
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 735000, lightp]
type = Explod
triggerall = NumExplod(2030) = 0
trigger1 = AnimElem = 4
pos = 56,-80
anim = 2030
ID = 2030
sprpriority = 5
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 735000, cobra]
type = Explod
triggerall = NumExplod(6010) = 0
trigger1 = AnimElem = 2
pos = -450,-40
anim = 6010
ID = 6010
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3010

;------------------------
[Statedef 3010]
type = S
movetype = A
physics = N
anim = 3010
velset = 0, 0

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 60
pos = 30,5
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 735000, sfondo]
type = Explod
triggerall = NumExplod(64) = 0
trigger1 = AnimElem = 1
pos = -320,0
anim = 64
ID = 64
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 735000, sfondo1]
type = Explod
triggerall = NumExplod(65) = 0
trigger1 = AnimElem = 1
pos = -320,150
anim = 65
ID = 65
postype = right
sprpriority = -6
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 3010,VelSet]
type = VelSet
trigger1 = 1
x = 8

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 1, 0

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 1, 1

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 1, 2

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 999
length = 20
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 3010,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = S, HA
animtype = Hard
hitflag = MA
guardflag = M
priority = 8,Miss
damage = 0 ,0
getpower = 0
sparkno = S2020
guard.sparkno = S2070
sparkxy = 15,-40
hitsound   = S3, 1
guardsound = S4, 1
pausetime = 12,12
ground.slidetime = 15
ground.type = High
ground.velocity = 0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
fall = 1 
fall.recover = 0
air.recover = 0
p2facing = 1
p1stateno = 3030
p2stateno = 3040
p2getp1state = 1

[State 3010,ChangeState]
type = ChangeState
trigger1 = Time = 18 || moveguarded
value = 3020

;------------------------
[Statedef 3020]
type = S
movetype = I
physics = S
anim = 3020

[State 735000]
type = RemoveExplod
triggerall = NumExplod(64) = 1
trigger1 = AnimElem = 2
ID = 64

[State 3020,AfterImageTime]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3020,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 3030]
type = S
movetype = A
physics = S
anim = 3030
velset = 0, 0
poweradd = 200
sprpriority = 1

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3030,AfterImageTime]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3030,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3030,Width]
type = Width
trigger1 = Time = 0 && FrontEdgeDist < 50
edge = 60,20

[State 3030,TargetBind]
type = TargetBind
trigger1 = AnimElem >= 1
pos = 50, 0

[State 3030,HitAdd]
type = HitAdd
trigger1 = AnimElem = 3  || AnimElem = 10 || AnimElem = 17
trigger2 = AnimElem = 28 || AnimElem = 37 || AnimElem = 47
trigger3 = AnimElem = 58 || AnimElem = 64 || AnimElem = 67
value = 1

[State 3030,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3  || AnimElem = 10 || AnimElem = 17
trigger2 = AnimElem = 28 || AnimElem = 37 || AnimElem = 47
trigger3 = AnimElem = 58 || AnimElem = 64 || AnimElem = 66
value = -24
kill = 0

[State 3030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 40
value = 3, 0

[State 3030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,=1 || AnimElem = 19
value = 3, 3

[State 3030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 10 || AnimElem = 32
value = 3, 1

[State 3030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 18 || AnimElem = 42 || AnimElem = 57 
value = 3, 2

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 2020
pos = 30,-65
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 10 || AnimElem = 17 || AnimElem = 19 || AnimElem = 32 
trigger2 = AnimElem = 42 || AnimElem = 40 || AnimElem = 51
anim = 2020
pos = 65,-65
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 56
anim = 2020
pos = 65,-20
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 1000, hit]
type = Explod
trigger1 = AnimElem = 65
persistent = 0
anim = 66
pos = -320,0
postype = right
sprpriority = 9
bindtime = 12
ignorehitpause = 1
ownpal = 1

[State 3030,HitDef]
type = HitDef
trigger1 = AnimElem = 65
attr = S, HA
animtype = DiagUp
damage    = 96,12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 29,29
hitsound   = S3, 5
guardsound = S4, 1
sparkno = S2020
guard.sparkno = S2070
sparkxy = -10,-90
ground.type = High
ground.slidetime = 7
ground.hittime  = 18
ground.velocity = -10,-8.5
guard.velocity = -5.0
air.velocity = -10,-8.5
yaccel = .45
fall = 1
fall.recover = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 64
value = 0, 9

[state 1200, white fadeout]
type = BGPalFx
trigger1 = p2life = 0
add = 255,255,255
sinadd = 300,300,300,60
time= 40
ignorehitpause = 1
persistent= 0

[State 3030, Posadd]
type = Posadd
trigger1 = AnimElem = 67
x = 2

[State 3030, Posadd]
type = Posadd
trigger1 = AnimElem = 68
x = 8

[State 3030, Posadd]
type = Posadd
trigger1 = AnimElem = 69
trigger2 = AnimElem = 72
trigger3 = AnimElem = 73
trigger4 = AnimElem = 74
x = 12

[State 3030,TargetBind]
type = TargetState
trigger1 = AnimElem = 61
value = 3050

[State 3030,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 3040]
type = A
movetype = H
physics = N
velset = 0, 0
ctrl = 0

[State 3040, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3040,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3040,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3040,PosAdd]
type = PosAdd
trigger1 = AnimElem = 3, = 1 || AnimElem = 10, = 1 || AnimElem = 17 ,=1
trigger2 = AnimElem = 19, = 1 || AnimElem = 32, = 1 || AnimElem = 42 ,=1
trigger3 = AnimElem = 43, = 1 || AnimElem = 51, = 1 || AnimElem = 60 ,=1
x = IfElse(Time % 2 = 0,2,-2)

[State 3040,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3040

;------------------------ 
[Statedef 3050]
type = S
movetype = H
physics = S
velset = 0, 0
ctrl = 0

[State 3050,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3050,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3050

[State 3050,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 16

[State 3050,PlayerPush]
type = PlayerPush
trigger1 = Time = [0,16]
value = 0

[State 3050,PosFreeze]
type = PosFreeze
trigger1 = Time = [0,16]

[State 3050,SelfState]
type = SelfState
trigger1 = Time = 20
value = 0
ctrl = 1


;---------------------------------------
;Super 2 - artigli del cobra 2
;---------------------------------------
[Statedef 3200]
type = S
movetype = A
physics = S
anim = 3001
velset = 0, 0
ctrl = 0
juggle = 5
poweradd= -1000

[State 3200,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 11

[State 3200,EnvColor]
type = EnvColor
trigger1 = Time = 2
value = 248,248,248
time = 2
under = 1

[State 3200,EnvColor]
type = EnvColor
trigger1 = Time = 4
value = 0, 0, 0
time = 24
under = 1

[State 3200,AssertSpecial]
type = AssertSpecial
trigger1 = Time = [2,28]
flag = NoFG

[State 735000, cosmo]
type = Explod
triggerall = NumExplod(2) = 0
trigger1 = AnimElem = 2
pos = 0,0
anim = 2
sprpriority = -1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 48

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 7

[State 3000,SuperPause]
type = SuperPause
trigger1 = Time = 1
time = 55
movetime = 35
anim = s2200
pos = 32, -75 
sound = S1,7
darken = 1

[State 735000, polvere]
type = Explod
triggerall = NumExplod(2600) = 0
trigger1 = AnimElem = 2
pos = 15,0
anim = 2600
ID = 2600
sprpriority = -5
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 735000, lightp]
type = Explod
triggerall = NumExplod(2030) = 0
trigger1 = AnimElem = 4
pos = 32,-75
anim = 2030
ID = 2030
sprpriority = 5
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 735000, cobra]
type = Explod
triggerall = NumExplod(6010) = 0
trigger1 = AnimElem = 2
pos = -450,-40
anim = 6010
ID = 6010
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 3200,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 3200,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 32011
ctrl = 1

;---------------------------------------------
;corsa
[Statedef 32011]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1055
velset = 0, 0
poweradd = 0

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 25
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2500
pos = 35,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 735000, sfondo1]
type = Explod
triggerall = NumExplod(65) = 0
trigger1 = AnimElem = 1
pos = -320,150
anim = 65
ID = 65
postype = right
sprpriority = -6
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 1001,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 25

[State 3201,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = Hard
damage    = 0
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S4,1
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-48
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8
p1stateno = 3201

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,8

[State 3200,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 
[Statedef 3201]
type = S
movetype = A
physics = S
anim = 3201
velset = 0, 0
ctrl = 0
poweradd= 200

[State 735000, sfondo]
type = Explod
triggerall = NumExplod(64) = 0
trigger1 = time = 0
pos = -320,0
anim = 64
ID = 64
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,2
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-48
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 9
trigger2 = AnimElem = 17
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = (IfElse((AnimElem = 9),5,10)),(IfElse((AnimElem = 9),5,10))
hitsound = S3,5
guardsound = S6,2
sparkno = S2020
guard.sparkno = S2070
sparkxy = (IfElse((AnimElem = 9),0,-30)),-(IfElse((AnimElem = 9),48,80))
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
kill = 0

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 5,5
hitsound = S3,5
guardsound = S6,2
sparkno = S2010
guard.sparkno = S2060
sparkxy = 0,-20
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
kill = 0

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 35
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,2
sparkno = S2010
guard.sparkno = S2060
sparkxy = -23,-60
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 1000, hit]
type = Explod
trigger1 = AnimElem = 40
persistent = 0
anim = 66
pos = -320,0
postype = right
sprpriority = 9
bindtime = 12
ignorehitpause = 1
ownpal = 1

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 40
attr = S, HA
animtype = UP
damage    = 48,6
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,1
sparkno = S2020
guard.sparkno = S2070
sparkxy = -15,-60
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-12
guard.velocity = -9.0
air.velocity = -2,-12
yaccel = .5
fall = 1
fall.recover = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 40
value = 0, 9

[state 1200, white fadeout]
type = BGPalFx
trigger1 = p2life = 0
add = 255,255,255
sinadd = 300,300,300,60
time= 40
ignorehitpause = 1
persistent= 0

[State 3201,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 49
movetype = I

[State 3201, VelSet]
type = VelSet
trigger1 = AnimElem = 7 ;,>= 0 && AnimElem = 45,< 0
x = 2

[State 3201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
[Statedef 3202]
type = S
movetype = A
physics = S
anim = 3202
velset = 0, 0
ctrl = 0

[State 3202,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0, 7

[State 3202,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, 28

[State 3202,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 19
value = 0, 29

[State 3202,HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = Hard
damage    = 160
getpower = 0
guardflag = 
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,2
sparkno = S2020
sparkxy = 0,-85
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9,-6
air.velocity = -9,-6
yaccel = .5
fall = 1
fall.recover = 0
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3202,HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype = UP
damage    = 80,10
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,2
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-95
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,-11
guard.velocity = -5.0
air.velocity = 0,-11
yaccel = .5
fall = 1
fall.recover = 0
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3202,HitDef]
type = HitDef
trigger1 = AnimElem = 24
attr = S, HA
animtype = DiagUp
damage    = 192,24
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,1
sparkno = S2020
guard.sparkno = S2070
sparkxy = -10,-90
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -12,-8
guard.velocity = -5.0
air.velocity = -12,-8
yaccel = .45
fall = 1
fall.recover = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3202,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 25
movetype = I

[State 3202, Posadd]
type = Posadd
trigger1 = AnimElem = 13
x = -10

[State 3202, Posadd]
type = Posadd
trigger1 = AnimElem = 25
trigger2 = AnimElem = 26
trigger3 = AnimElem = 27
x = 13

[State 3202,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;freccia indicativa p2
[State -3, target sign]
type = Explod
triggerall = NumExplod(3718) = 0
trigger1 = P2Dist y > 200
anim = 3718
id = 3718
pos = 0,-20
postype = p2
sprpriority = 4
supermove = 1
ignorehitpause = 1
ontop = 1
ownpal = 1
bindtime = -1
persistent = 1
facing = -1

;freccia indicativa p2
[State -3,remove]
type = RemoveExplod
trigger1 = P2Dist y < 200
ID = 3718



;-----------------------------------------------------
;cobra inkantatore
;-----------------------------------------------------
[Statedef 6000]
type = S
movetype = I
physics = S
anim = 9010
velset = 0, 0
ctrl = 0
poweradd= -2000

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 42

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 13

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 17
value = 1, 5

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1, 7

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 21
value = 4, 0

[State 4500,1]
type = SuperPause
trigger1 = AnimElem = 11
time = 55
movetime = 25
anim = S63
pos = 0,-160
darken = 1

[State 735000, cobra]
type = Explod
triggerall = NumExplod(6010) = 0
trigger1 = AnimElem = 9
pos = -450,-40
anim = 6010
ID = 6010
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 60

[State 1015, scia]
type = Explod
triggerall = NumExplod(60) = 0
trigger1 = Animelem = 3
ID = 60
anim = 60
pos = -10,5
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 1

[State 4050,6]
type = AfterImage
trigger1 = Time = 0
time = 200
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 735000, polvere]
type = Explod
trigger1 = AnimElem = 25
pos = 0,0
anim = 2600
sprpriority = -2
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 120

[State 735000, light]
type = Explod
trigger1 = AnimElem = 25
pos = 55,-40
anim = 2030
sprpriority = 9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 95

[State 735000, cosmo]
type = Explod
triggerall = NumExplod(3) = 0
trigger1 = AnimElem = 24
pos = 0,0
anim = 3
ID = 3
sprpriority = -1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 105

[State 510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 24
value = 1, 8

[State 1700, raio]
type = Projectile
trigger1 = AnimElem = 25
projanim = 62
projhits = 99999999
projmisstime = 3
projpriority = 4
projremovetime = 95
projid = 3001
offset = 50,-43
attr = S, HP
damage   = 11
animtype = heavy
guardflag = MA
hitflag = MAFP
pausetime = 0,3
hitsound   = s8,0
sparkno = s61
sparkxy = 150,-50
guardsound = S4,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5   
fall = 1
air.animtype = Back
air.velocity = -5,-8
air.juggle = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
;PalFX
palfx.time = 55
palfx.add = 248,148,250

[State 735000, cobra]
type = Explod
triggerall = NumExplod(66) = 0
trigger1 = AnimElem = 25
pos = -320,0
anim = 66
ID = 66
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 95

[state 1200, white fadeout]
type = BGPalFx
trigger1 = p2life = 0
add = 255,255,255
sinadd = 300,300,300,60
time= 40
ignorehitpause = 1
persistent= 0

[State 1700, envshake]
type = EnvShake
trigger1 = AnimElem = 25
time = 100

[State 3201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------
;Super 4 - Cobra Hurricane Kick
;---------------------------------------
[Statedef 7000]
type = S
movetype = A
physics = S
anim = 3001
velset = 0, 0
ctrl = 0
juggle = 5
poweradd= -2000

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 23

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 7

[State 3200,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 11

[State 3200,EnvColor]
type = EnvColor
trigger1 = Time = 2
value = 248,248,248
time = 2
under = 1

[State 3200,EnvColor]
type = EnvColor
trigger1 = Time = 4
value = 0, 0, 0
time = 24
under = 1

[State 3200,AssertSpecial]
type = AssertSpecial
trigger1 = Time = [2,28]
flag = NoFG

[State 735000, cosmo]
type = Explod
triggerall = NumExplod(2) = 0
trigger1 = AnimElem = 2
pos = 0,0
anim = 2
sprpriority = -1
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 48

[State 3000,SuperPause]
type = SuperPause
trigger1 = Time = 1
time = 55
movetime = 35
anim = s2200
pos = 32, -75
sound = S1,7
darken = 1

[State 735000, polvere]
type = Explod
triggerall = NumExplod(2600) = 0
trigger1 = AnimElem = 2
pos = 15,0
anim = 2600
ID = 2600
sprpriority = -5
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 735000, luce]
type = Explod
triggerall = NumExplod(2250) = 0
trigger1 = AnimElem = 2
pos = 15,0
anim = 2250
ID = 2250
sprpriority = -3
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 735000, lightp]
type = Explod
triggerall = NumExplod(2030) = 0
trigger1 = AnimElem = 4
pos = 32,-75
anim = 2030
ID = 2030
sprpriority = 5
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 735000, cobra]
type = Explod
triggerall = NumExplod(6010) = 0
trigger1 = AnimElem = 2
pos = -450,-40
anim = 6010
ID = 6010
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1
removetime = 55

[State 3200,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 3200,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 7001
ctrl = 1

;---------------------------------------------
;corsa
[Statedef 7001]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1055
velset = 0, 0
poweradd = 0
;juggle = 5

[State 1015, scia]
type = Explod
trigger1 = Animelem = 1
anim = 2500
pos = 35,10
postype = p1
sprpriority = 5
ownpal = 1
ignorehitpause = 0

[State 735000, sfondo1]
type = Explod
triggerall = NumExplod(65) = 0
trigger1 = AnimElem = 1
pos = -320,150
anim = 65
ID = 65
postype = right
sprpriority = -6
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1

[State 1001,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 25

[State 3201,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = Hard
damage    = 0
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S4,1
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-48
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8
p1stateno = 7002

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,8

[State 3200,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 
[Statedef 7002]
type = S
movetype = A
physics = S
anim = 3120
velset = 0, 0
ctrl = 0
poweradd= 250

[State 735000, sfondo]
type = Explod
triggerall = NumExplod(644) = 0
trigger1 = time = 0
pos = -320,0
anim = 644
ID = 644
postype = right
sprpriority = -9
ignorehitpause = 1
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1
supermove = 1


[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,2
sparkno = S2020
guard.sparkno = S2070
sparkxy = 0,-48
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
kill = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 15
trigger2 = AnimElem = 26
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = (IfElse((AnimElem = 9),5,10)),(IfElse((AnimElem = 9),5,10))
hitsound = S3,5
guardsound = S6,2
sparkno = S2020
guard.sparkno = S2070
sparkxy = (IfElse((AnimElem = 9),0,-30)),-(IfElse((AnimElem = 9),48,80))
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
kill = 0

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 38
trigger2 = AnimElem = 39
trigger3 = AnimElem = 40
attr = S, HA
animtype = Hard
damage    = Ceil(96 / (2 ** HitCount)),12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 5,5
hitsound = S3,5
guardsound = S6,2
sparkno = S2010
guard.sparkno = S2060
sparkxy = 0,-20
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -0.000001,0
guard.velocity = -5.0
air.velocity = -3.5,-6
kill = 0

[State 1000, hit]
type = Explod
trigger1 = AnimElem = 53
persistent = 0
anim = 77
pos = -320,0
postype = right
sprpriority = -7
bindtime = 12
ignorehitpause = 1
ownpal = 1
removetime = 50

[State 3201,HitDef]
type = HitDef
trigger1 = AnimElem = 53
trigger2 = AnimElem = 54
attr = S, HA
animtype = UP
damage    = 48,6
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 28,28
hitsound = S3,5
guardsound = S6,1
sparkno = S2020
guard.sparkno = S2070
sparkxy = -15,-60
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-12
guard.velocity = -9.0
air.velocity = -2,-12
yaccel = .5
fall = 1
fall.recover = 0
envshake.time = 20
envshake.freq = 60
envshake.ampl = -8

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 53
value = 0, 9

[state 1200, white fadeout]
type = BGPalFx
trigger1 = p2life = 0
add = 255,255,255
sinadd = 300,300,300,60
time= 40
ignorehitpause = 1
persistent= 0

[State 3201, VelSet]
type = VelSet
trigger1 = AnimElem = 2 
x = 2

[State 3201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1202
ctrl = 1

;------------------------


;---------------------------------------------
;---------------------------------------------
;Altro
;---------------------------------------------
;---------------------------------------------

;scatto
[Statedef 1240]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 1240,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 3

[State 1240,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 1240,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 1240,VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .55

[State 1240,VelAdd]
type = VelSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
x = 0

[State 1240,PosSet]
type = PosSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 1240,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1010
ctrl = 0

;freccia indicativa p2
[State -3, target sign]
type = Explod
triggerall = NumExplod(3718) = 0
trigger1 = P2Dist y > 200
anim = 3718
id = 3718
pos = 0,-20
postype = p2
sprpriority = 4
supermove = 1
ignorehitpause = 1
ontop = 1
ownpal = 1
bindtime = -1
persistent = 1
facing = -1

;freccia indicativa p2
[State -3,remove]
type = RemoveExplod
trigger1 = P2Dist y < 200
ID = 3718

;------------------------
[Statedef 6021]
type = A
movetype = H
physics = N
velset = 2.5,-9.5
ctrl = 0

[State 6021,PosFreeze]
type = PosFreeze
trigger1 = Time = (0,3]

[State 6021,turn]
type = turn
trigger1 = Time = 3

[State 6021,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 3
value = 5030

[State 6021,ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = anim = 5030
trigger1 = SelfAnimExist(5035)
value = 5035

[State 6021,ChangeAnim]
type = ChangeAnim
triggerall = AnimTime = 0
trigger1 = anim = 5030
trigger1 = !SelfAnimExist(5035)
trigger2 = anim = 5035
value = 5050

[State 6021,veladd]
type = veladd
trigger1 = Time > 3
y = .45

[State 6021,SelfState]
type = SelfState
trigger1 = Time > 3
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;freccia indicativa p2
[State -3, target sign]
type = Explod
triggerall = NumExplod(3718) = 0
trigger1 = P2Dist y > 200
anim = 3718
id = 3718
pos = 0,-20
postype = p2
sprpriority = 4
supermove = 1
ignorehitpause = 1
ontop = 1
ownpal = 1
bindtime = -1
persistent = 1
facing = -1

;freccia indicativa p2
[State -3,remove]
type = RemoveExplod
trigger1 = P2Dist y < 200
ID = 3718

;---------------------------------------------
;---------------------------------------------
;Stati Sekondari
;---------------------------------------------
;---------------------------------------------

;---------------------------------------------
;---------------------------------------------
[Statedef -2]
;---------------------------------------------
;---------------------------------------------
;
[State -2,debug]
type = displaytoclipboard
trigger1 = 1
text = "Attack = %d Var(18) = %d var(16) = %d"
params = Var(15),Var(18),Var(16)
ignorehitpause = 1

;---------------------------------------------
;
[State -2,AfterImageTime]
type = AfterImageTime
trigger1 = MoveType = H
time = 0

;---------------------------------------------
;
[State -2,2]
type = VarSet
trigger1 = Time = 0 && (StateNo = 150 || StateNo = 152 || StateNo = 154)
v = 4
value = 1

[State -2,3]
type = VarSet
trigger1 = Var(4)  = 1 && Time = 15
v = 4
value = 0

;---------------------------------------------
; Sound Fix
[State -2,4]
type = PlaySnd
trigger1 = Time = 1 && StateNo = 52
value = 1,6

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5000 || Anim = 5010 || Anim = 5020
value = 5000, 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5001 || Anim = 5011 || Anim = 5021
value = 5000, 10

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5002 || Anim = 5012 || Anim = 5022
value = 5000, 20

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1
trigger1 = (StateNo = [200,230]) || (StateNo = [400,410]) || (StateNo = [600,610]) 
value = 2, 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1
trigger1 = (StateNo = [240,250]) || (StateNo = [630,640]) || (StateNo = [430,440]) || (StateNo = [500,510])
trigger2 = StateNo = 4500
value = 2, 1

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1
trigger1 = StateNo = 720
value = 2, 2

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1 && Random < 600
trigger1 = StateNo = 210 || StateNo = 230 || StateNo = 400
trigger2 = StateNo = 600 || StateNo = 430 || StateNo = 630
value = 0, 6

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1 && Random < 600
trigger1 = (StateNo = [210,220]) || (StateNo = [240,250]) || StateNo = 410
trigger2 = StateNo = 440 || StateNo = 610 || StateNo = 640
value = 0, 7

;---------------------------------------------
;
[State -2,VarSet]
type = VarSet
trigger1 = Time = 0 && Command = "holddown"
persistent = 0
v = 28
value = 1

[State -2,VarSet]
type = VarSet
trigger1 = Var(28) != 0 && Time = 5
v = 28
value = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(25) != 0 && (StateType != A || MoveType = H)
v = 25
value = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(26) != 0 && (StateType = A || MoveType = H)
v = 26
value = 0

;---------------------------------------------
;
[State -2,VarSet]
type = VarSet
trigger1 = MoveType = H || ctrl
var(11) = 0

[State -2, 0]
type = VarSet
trigger1 = Var(17) = 0
var(17) = Ifelse(Facing = 1,1,-1)

;---------------------------------------------
;
[State -2,VarSet]
type = VarSet
trigger1 = enemy,MoveType != H || stateno != 150 || stateno != 152
var(15) = 0
ignorehitpause = 1

[State -2,AttackMulSet]
type = AttackMulSet
trigger1 = var(15) = 1
value = .625
ignorehitpause = 1

;---------------------------------------------
;
[State -2,VarSet]
type = VarSet
trigger1 = enemy,StateNo = [1000,2999)
trigger1 = enemy,movetype = A
trigger1 = movetype = A
trigger1 = movetype != H
var(16) = 1
ignorehitpause = 1

[State -2,Envcolor]
type = Envcolor
triggerall = Var(16) = 1
trigger1 = enemy,movetype = H
trigger1 = movetype = A
value = 255, 255, 255
persistent = 0
ignorehitpause = 1
time = 1
under = 1

[State -2,VarSet]
type = VarSet
trigger1 = enemy,movetype != A
trigger2 = enemy,movetype = H && HitPauseTime = 2
trigger3 = movetype != A
trigger4 = movetype = H
var(16) = 0
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
trigger1 = var(16) = 1
trigger1 = NumExplod(7000) = 0
trigger1 = enemy,movetype = A
trigger1 = movetype = A
var(18) = 1
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
trigger1 = NumExplod(7000) = 1
trigger2 = movetype != A
var(18) = 0
ignorehitpause = 1

[State -2,Assertspecial]
type = Assertspecial
trigger1 = enemy,movetype = A
flag = Nojugglecheck

[State -2,CounterHitFigure]
type = Explod
triggerall = Var(18) = 1 && Var(17) = 1
trigger1 = enemy,movetype = H
trigger1 = NumExplod(7000) = 0
anim = 7000
id = 7000
postype = Left
pos = 8, 192
facing = 1
bindtime = -1
ontop = 1
removetime = -2
sprpriority = 5
ownpal = 1
ignorehitpause = 1

[State -2,CounterHitFigure]
type = Explod
triggerall = Var(18) = 1 && Var(17) = -1
trigger1 = enemy,movetype = H
trigger1 = NumExplod(7000) = 0
anim = 7000
id = 7000
postype = Right
pos = -80, 192
facing = 1
bindtime = -1
ontop = 1
removetime = -2
sprpriority = 5
ownpal = 1
ignorehitpause = 1

;freccia indicativa p2
[State -3, target sign]
type = Explod
triggerall = NumExplod(3718) = 0
trigger1 = P2Dist y > 200
anim = 3718
id = 3718
pos = 0,-20
postype = p2
sprpriority = 4
supermove = 1
ignorehitpause = 1
ontop = 1
ownpal = 1
bindtime = -1
persistent = 1
facing = -1

;freccia indicativa p2
[State -3,remove]
type = RemoveExplod
trigger1 = P2Dist y < 200
ID = 3718


:---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
:---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; AI variabili (statedef -2)
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------


;[Statedef -2]

[State -2, Get P2 Distance]
type = VarSet
trigger1 = P2Dist X != 0
v = 11
value = floor(P2Dist X)

;---------------------------------------------------------------------------
;Special Moves
;---------------------------------------------------------------------------

;carika cosmo
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [0, 50])
trigger1 = (P2bodydist X >= 200) &&  (power <= 2999) && (prevstateno != 5120) && (p2movetype != H) 
value = 730000

;mega pugno 1
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [50, 100])
trigger1 = (P2bodydist X <= 80) && (prevstateno != 5120) && (p2movetype != H) 
value = 1020

;mega pugno 2
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [100, 150])
trigger1 = (P2bodydist X <= 85) && (prevstateno != 5120) && (p2movetype != H) 
value = 1030

;presa + uppercut			
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [150, 200])
trigger1 = (P2bodydist X <= 120) && (prevstateno != 5120) && (p2movetype != H) 
value = 1000

;Pugno Rotante
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [200, 250])
trigger1 = (P2bodydist X <= 100) && (prevstateno != 5120) && (p2movetype != H) 
value = 1220

;uppercut
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [250, 300])
trigger1 = (P2bodydist X <= 70) && (prevstateno != 5120) && (p2movetype != H) 
value = 1210

;combo1
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [300, 350])
trigger1 = (P2bodydist X <= 300) && (prevstateno != 5120) && (p2movetype != H) 
value = 1100

;combo2
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [350, 450])
trigger1 = (P2bodydist X <= 170) && (prevstateno != 5120) && (p2movetype != H) 
value = 1151

;combo3
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [450, 500])
trigger1 = (P2bodydist X <= 110) && (prevstateno != 5120) && (p2movetype != H) 
value = 1202


;---------------------------------------------------------------------------
;Mini Super Moves
;---------------------------------------------------------------------------

;Iper Pugno			
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (random = [450, 500])
trigger1 = (P2bodydist X <= 100) && (power >= 200) && (prevstateno != 5120) && (p2movetype != H) 
value = 4500

;---------------------------------------------------------------------------
;Super Moves
;---------------------------------------------------------------------------

;level 2
:Cobra Incantatore
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (p2statetype != L)
trigger1 = (p2bodydist X <= 320) && (power >= 2000) && (random = [500,550])
value = 6000

;level 2
;Cobra Hurricane Kick
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (p2statetype != L)
trigger1 = (p2bodydist X <= 250) && (power >= 2000) && (random = [550,600])
value = 7000

;level1
;Artigli del Cobra
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (p2statetype != L)
trigger1 = (p2bodydist X <= 200) && (power >= 1000) && (power <= 1750) && (random = [600,650])
value = 3000

;level1
;Artigli del Cobra 2
[State -2]
type = changestate
Triggerall = roundstate = 2
triggerall = (var(59) != 0) && (statetype = S) && (ctrl) && (p2statetype != L)
trigger1 = (p2bodydist X <= 250) && (power >= 1000) && (power <= 1750) && (random = [650,700])
value = 3200


:---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
:---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

:---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
:---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------











